(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{669:function(s,n,t){s.exports=t.p+"assets/img/Nginx_knowledge_diagram.782d0ba7.png"},670:function(s,n){s.exports="data:image/jpeg;base64,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"},671:function(s,n,t){s.exports=t.p+"assets/img/Nginx_configuration_examples.85882acb.jpg"},672:function(s,n,t){s.exports=t.p+"assets/img/nginx-cluster.93ad470e.png"},876:function(s,n,t){"use strict";t.r(n);var a=t(2),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.w3cschool.cn/nginxsysc/",target:"_blank",rel:"noopener noreferrer"}},[s._v("W3CSCHOOL-Nginx使用手册"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/m0_49558851/article/details/107786372",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx学习笔记 基于docker"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/e90050dc89b6",target:"_blank",rel:"noopener noreferrer"}},[s._v("当初我要是这么学习Nginx就好了！多图详解"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/yujing1314/article/details/107000737",target:"_blank",rel:"noopener noreferrer"}},[s._v("搞懂Nginx一篇文章就够了"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.runoob.com/w3cnote/nginx-setup-intro.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx 配置详解"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.nginx.cn/nginx-how-to",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx中文手册"),a("OutboundLink")],1)])])]),s._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("p",[s._v("Nginx (engine x) 是一个高性能的 "),a("code",[s._v("Web 服务器")]),s._v("和"),a("code",[s._v("反向代理服务器")]),s._v("，也是一个 IMAP/POP3/SMTP 服务器：")]),s._v(" "),a("p",[s._v("Nginx是一款轻量级的高性能web服务器，同时也是一款非常优秀的负载均衡器和反向代理服务器。由于支持强大的正则匹配规则、动静分离、URLrewrite功能及安装配置简单且对网络稳定性依赖非常小等优点，所以常用来做为七层负载均衡使用。在硬件不差的情况下，通常可以稳定支持几万的并发连接，在硬件性能足够好，且对系统内核参数及Nginx配置进行优化甚至可以达到10万以上的并发。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(669),alt:"学习路线图"}})]),s._v(" "),a("h2",{attrs:{id:"特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("特点")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("反向代理，负载均衡器")])]),s._v(" "),a("li",[a("strong",[s._v("高可靠性、单 Master 多 Worker 模式")])]),s._v(" "),a("li",[a("strong",[s._v("高可扩展性、高度模块化")])]),s._v(" "),a("li",[a("strong",[s._v("非阻塞")])]),s._v(" "),a("li",[a("strong",[s._v("事件驱动")])]),s._v(" "),a("li",[a("strong",[s._v("低内存消耗")])]),s._v(" "),a("li",[a("strong",[s._v("热部署")])])])]),s._v(" "),a("h2",{attrs:{id:"应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")]),s._v(" 应用场景")]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("应用场景")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("静态文件服务器")])]),s._v(" "),a("li",[a("strong",[s._v("反向代理，负载均衡")])]),s._v(" "),a("li",[a("strong",[s._v("安全防御")])]),s._v(" "),a("li",[a("strong",[s._v("智能路由（企业级灰度测试、地图 POI 一键切流）")])]),s._v(" "),a("li",[a("strong",[s._v("灰度发布")])]),s._v(" "),a("li",[a("strong",[s._v("静态化")])]),s._v(" "),a("li",[a("strong",[s._v("消息推送")])]),s._v(" "),a("li",[a("strong",[s._v("图片实时压缩")])]),s._v(" "),a("li",[a("strong",[s._v("防盗链")])])])]),s._v(" "),a("h2",{attrs:{id:"安装-docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker安装"}},[s._v("#")]),s._v(" 安装（Docker安装）")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.runoob.com/docker/docker-install-nginx.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 安装 Nginx"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"第一种-直接docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一种-直接docker安装"}},[s._v("#")]),s._v(" 第一种：直接docker安装")]),s._v(" "),a("h4",{attrs:{id:"拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[s._v("#")]),s._v(" 拉取镜像")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("ul",[a("li",[s._v("https://hub.docker.com/_/nginx?tab=tags")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker pull nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"修改配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[s._v("#")]),s._v(" 修改配置文件")]),s._v(" "),a("p",[s._v("配置文件存放路径："),a("code",[s._v("/etc/nginx/nginx.conf")])]),s._v(" "),a("p",[s._v("修改后重启容器即可")]),s._v(" "),a("h3",{attrs:{id:"第二种-使用docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二种-使用docker-compose"}},[s._v("#")]),s._v(" 第二种：使用docker-compose")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("/usr/local/docker/nginx/")]),s._v("配置好"),a("code",[s._v("docker-compose.yml")]),s._v("，并将"),a("code",[s._v("/etc/nginx/conf.d")]),s._v("下的配置文件映射")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.1'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nginx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[s._v("80:80")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /usr/local/docker/nginx/conf.d/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/etc/nginx/conf.d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("下载"),a("code",[s._v("docker-compose")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" -o /usr/local/bin/docker-compose\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://get.daocloud.io/docker/compose/releases/download/1.25.1/docker-compose-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" -o /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("添加可执行权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在"),a("code",[s._v("/usr/local/docker/nginx/conf.d/")]),s._v("下创建"),a("code",[s._v("default.conf")]),s._v("并配置")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    listen  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index  index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    error_page   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("运行"),a("code",[s._v("docker-compose.yml")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose up -d\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"nginx配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置文件"}},[s._v("#")]),s._v(" Nginx配置文件")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.nginx.cn/76.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx基本配置与参数说明"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("https://www.cnblogs.com/panchanggui/p/12067953.html")])])]),s._v(" "),a("p",[a("img",{attrs:{src:t(670),alt:"nginx配置文件的整体结构"}})]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("文件块")]),s._v(" "),a("th",[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("全局块")]),s._v(" "),a("td",[s._v("配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成"),a("code",[s._v("worker process")]),s._v("数等。")])]),s._v(" "),a("tr",[a("td",[s._v("events")]),s._v(" "),a("td",[s._v("配置影响nginx"),a("code",[s._v("服务器或与用户的网络连接")]),s._v("。"),a("code",[s._v("每个进程的最大连接数")]),s._v("，"),a("code",[s._v("选取哪种事件驱动模型处理连接请求")]),s._v("，"),a("code",[s._v("是否允许同时接受多个网路连接")]),s._v("，"),a("code",[s._v("开启多个网络连接序列化")]),s._v("等")])]),s._v(" "),a("tr",[a("td",[s._v("http")]),s._v(" "),a("td",[s._v("可以嵌套多个server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。如文件引入，mime-type定义，日志自定义，是否使用sendfile传输文件，连接超时时间，单连接请求数等。")])]),s._v(" "),a("tr",[a("td",[s._v("server")]),s._v(" "),a("td",[s._v("配置"),a("code",[s._v("虚拟主机的相关参数")]),s._v("，一个http中可以有多个server。")])]),s._v(" "),a("tr",[a("td",[s._v("location")]),s._v(" "),a("td",[s._v("配置"),a("code",[s._v("请求的路由")]),s._v("，以及"),a("code",[s._v("各种页面的处理情况")]),s._v("。")])])])]),s._v(" "),a("h3",{attrs:{id:"全局块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局块"}},[s._v("#")]),s._v(" 全局块")]),s._v(" "),a("blockquote",[a("p",[s._v("配置影响nginx全局的指令")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("配置项")]),s._v(" "),a("ul",[a("li",[s._v("错误日志的存放路径")]),s._v(" "),a("li",[s._v("Nginx进程PID存放路径")]),s._v(" "),a("li",[s._v("配置运行Nginx服务器用户（组）")]),s._v(" "),a("li",[s._v("允许生成"),a("code",[s._v("worker process")]),s._v("数")]),s._v(" "),a("li",[s._v("配置文件的引入")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下统称为全局块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# error_log代表Nginx错误日志存放的位置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pid是Nginx运行的一个标识")]),s._v("\n\nuser  nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nerror_log  /var/log/nginx/error.log warn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npid        /var/run/nginx.pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"events块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#events块"}},[s._v("#")]),s._v(" events块")]),s._v(" "),a("blockquote",[a("p",[s._v("该部分配置主要影响Nginx服务器与用户的网络连接")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("配置项")]),s._v(" "),a("ul",[a("li",[s._v("每个进程的最大连接数")]),s._v(" "),a("li",[s._v("选取哪种事件驱动模型处理连接请求")]),s._v(" "),a("li",[s._v("是否允许同时接受多个网路连接")]),s._v(" "),a("li",[s._v("开启多个"),a("code",[s._v("网络连接序列化")])])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# events块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# worker_connections的数值越大，Nginx的并发能力就越强")]),s._v("\nevents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    worker_connections  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"http块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http块"}},[s._v("#")]),s._v(" http块")]),s._v(" "),a("blockquote",[a("p",[s._v("可以嵌套多个server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("配置项")]),s._v(" "),a("ul",[a("li",[s._v("定义MIMI-Type")]),s._v(" "),a("li",[s._v("自定义服务日志")]),s._v(" "),a("li",[s._v("允许sendfile方式传输文件")]),s._v(" "),a("li",[s._v("连接超时时间")]),s._v(" "),a("li",[s._v("单连接请求数上限")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include代表引入一个外部文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include       /etc/nginx/mime.types;\tmime.types中存放着大量媒体类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#include /etc/nginx/conf.d/*.conf;\t引入了conf.d下以.conf为结尾的配置文件")]),s._v("\n\nhttp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    include       /etc/nginx/mime.types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    default_type  application/octet-stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    log_format  main  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_user")]),s._v(" ["),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$time_local")]),s._v('] "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),s._v("\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$status")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$body_bytes_sent")]),s._v(' "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_referer")]),s._v("\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\""),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_user_agent")]),s._v('" "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_x_forwarded_for")]),s._v("\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    access_log  /var/log/nginx/access.log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    sendfile        on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tcp_nopush     on;")]),s._v("\n\n    keepalive_timeout  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip  on;")]),s._v("\n\n    include /etc/nginx/conf.d/*.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h3",{attrs:{id:"server块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server块"}},[s._v("#")]),s._v(" server块")]),s._v(" "),a("blockquote",[a("p",[s._v("配置"),a("code",[s._v("虚拟主机的相关参数")])])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("配置项")]),s._v(" "),a("ul",[a("li",[s._v("配置网络监听")]),s._v(" "),a("li",[s._v("基于名称的虚拟主机配置")]),s._v(" "),a("li",[s._v("基于IP的虚拟主机配置")])])]),s._v(" "),a("h3",{attrs:{id:"location块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#location块"}},[s._v("#")]),s._v(" location块")]),s._v(" "),a("blockquote",[a("p",[s._v("配置"),a("code",[s._v("请求的路由")]),s._v("，以及"),a("code",[s._v("各种页面的处理情况")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("配置项")]),s._v(" "),a("ul",[a("li",[s._v("请求根目录配置")]),s._v(" "),a("li",[s._v("更改location的URI")]),s._v(" "),a("li",[s._v("网站默认首页配置")])])]),s._v(" "),a("h3",{attrs:{id:"nginx-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-conf"}},[s._v("#")]),s._v(" nginx.conf")]),s._v(" "),a("p",[a("img",{attrs:{src:t(671),alt:"nginx配置举例"}})]),s._v(" "),a("p",[a("strong",[a("code",[s._v("nginx.conf")]),s._v("默认配置示例")])]),s._v(" "),a("div",{staticClass:"code-demo-wrapper",staticStyle:{display:"none"},attrs:{id:"code-demo-f8b8b26a","data-title":"nginx.conf%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B","data-code":"%7B%22bash%22%3A%22%23%20%E4%BB%A5%E4%B8%8B%E7%BB%9F%E7%A7%B0%E4%B8%BA%E5%85%A8%E5%B1%80%E5%9D%97%5Cn%5Cn%23%E5%AE%9A%E4%B9%89Nginx%E8%BF%90%E8%A1%8C%E7%9A%84%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%5Cnuser%20%20nginx%3B%5Cn%5Cn%23nginx%E8%BF%9B%E7%A8%8B%E6%95%B0%EF%BC%8C%E5%BB%BA%E8%AE%AE%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%AD%89%E4%BA%8ECPU%E6%80%BB%E6%A0%B8%E5%BF%83%E6%95%B0%E3%80%82%5Cnworker_processes%20%201%3B%5Cn%5Cn%23%E5%85%A8%E5%B1%80%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%EF%BC%8C%5B%20debug%20%7C%20info%20%7C%20notice%20%7C%20warn%20%7C%20error%20%7C%20crit%20%5D%5Cnerror_log%20%20%2Fvar%2Flog%2Fnginx%2Ferror.log%20warn%3B%5Cn%5Cn%23%E8%BF%9B%E7%A8%8Bpid%E6%96%87%E4%BB%B6%5Cnpid%20%20%20%20%20%20%20%20%2Fvar%2Frun%2Fnginx.pid%3B%5Cn%5Cn%5Cn%5Cn%5Cn%23%20events%E5%9D%97%5Cn%23%20worker_connections%E7%9A%84%E6%95%B0%E5%80%BC%E8%B6%8A%E5%A4%A7%EF%BC%8CNginx%E7%9A%84%E5%B9%B6%E5%8F%91%E8%83%BD%E5%8A%9B%E5%B0%B1%E8%B6%8A%E5%BC%BA%5Cn%5Cnevents%20%7B%5Cn%20%20%20%20worker_connections%20%201024%3B%5Cn%7D%5Cn%5Cn%5Cn%5Cn%5Cn%23%20http%E5%9D%97%5Cn%23%20include%E4%BB%A3%E8%A1%A8%E5%BC%95%E5%85%A5%E4%B8%80%E4%B8%AA%E5%A4%96%E9%83%A8%E6%96%87%E4%BB%B6%5Cn%23%20include%20%20%20%20%20%20%20%2Fetc%2Fnginx%2Fmime.types%3B%5Ctmime.types%E4%B8%AD%E5%AD%98%E6%94%BE%E7%9D%80%E5%A4%A7%E9%87%8F%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B%5Cn%23%20include%20%2Fetc%2Fnginx%2Fconf.d%2F*.conf%3B%5Ct%E5%BC%95%E5%85%A5%E4%BA%86conf.d%E4%B8%8B%E4%BB%A5.conf%E4%B8%BA%E7%BB%93%E5%B0%BE%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%5Cn%5Cnhttp%20%7B%5Cn%20%20%20%20include%20%20%20%20%20%20%20%2Fetc%2Fnginx%2Fmime.types%3B%5Cn%20%20%20%20default_type%20%20application%2Foctet-stream%3B%5Cn%5Cn%20%20%20%20log_format%20%20main%20%20'%24remote_addr%20-%20%24remote_user%20%5B%24time_local%5D%20%5C%22%24request%5C%22%20'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24status%20%24body_bytes_sent%20%5C%22%24http_referer%5C%22%20'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%5C%22%24http_user_agent%5C%22%20%5C%22%24http_x_forwarded_for%5C%22'%3B%5Cn%5Cn%20%20%20%20access_log%20%20%2Fvar%2Flog%2Fnginx%2Faccess.log%20%20main%3B%5Cn%5Cn%20%20%20%20sendfile%20%20%20%20%20%20%20%20on%3B%5Cn%20%20%20%20%23tcp_nopush%20%20%20%20%20on%3B%5Cn%5Cn%20%20%20%20keepalive_timeout%20%2065%3B%5Cn%5Cn%20%20%20%20%23gzip%20%20on%3B%5Cn%5Cn%20%20%20%20%23include%20%2Fetc%2Fnginx%2Fconf.d%2F*.conf%3B%5Cn%20%20%20%20%23%20server%E5%9D%97%5Cn%5Ct%5Ct%23%20listen%E4%BB%A3%E8%A1%A8Nginx%E7%9B%91%E5%90%AC%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7%5Cn%5Ct%5Ct%23%20server_name%E4%BB%A3%E8%A1%A8Nginx%E6%8E%A5%E5%8F%97%E8%AF%B7%E6%B1%82%E7%9A%84IP%5Cn%5Ctserver%20%7B%5Cn%20%20%20%20%5Ctlisten%20%20%20%20%20%20%2080%3B%5Cn%20%20%20%20%5Ctlisten%20%20%5B%3A%3A%5D%3A80%3B%5Cn%20%20%20%20%5Ctserver_name%20%20localhost%3B%5Cn%5Cn%20%20%20%20%5Ct%23charset%20koi8-r%3B%5Cn%20%20%20%20%5Ct%23access_log%20%20%2Fvar%2Flog%2Fnginx%2Fhost.access.log%20%20main%3B%5Cn%5Cn%5Cn%20%20%20%20%5Ct%23location%E5%9D%97%5Cn%20%20%20%20%5Ct%23%20root%3A%E5%B0%86%E6%8E%A5%E5%8F%97%E5%88%B0%E7%9A%84%E8%AF%B7%E6%B1%82%E6%A0%B9%E6%8D%AE%2Fusr%2Fshare%2Fnginx%2Fhtml%E5%8E%BB%E6%9F%A5%E6%89%BE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%5Cn%20%20%20%20%5Ct%23%20index%3A%E9%BB%98%E8%AE%A4%E5%8E%BB%E4%B8%8A%E8%BF%B0%E7%9A%84%E8%B7%AF%E5%BE%84%E4%B8%AD%E6%89%BE%E5%88%B0index.html%E6%88%96index.htm%5Cn%20%20%20%20%5Ctlocation%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20%5Ctroot%20%20%20%2Fusr%2Fshare%2Fnginx%2Fhtml%3B%5Cn%20%20%20%20%20%20%20%20%5Ctindex%20%20index.html%20index.htm%3B%5Cn%20%20%20%20%5Ct%7D%5Cn%5Cn%20%20%20%20%5Ct%23error_page%20%20404%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F404.html%3B%5Cn%5Cn%20%20%20%20%5Ct%23%20redirect%20server%20error%20pages%20to%20the%20static%20page%20%2F50x.html%5Cn%20%20%20%20%5Ct%23%5Cn%20%20%20%20%5Cterror_page%20%20%20500%20502%20503%20504%20%20%2F50x.html%3B%5Cn%20%20%20%20%5Ctlocation%20%3D%20%2F50x.html%20%7B%5Cn%20%20%20%20%20%20%20%20%5Ctroot%20%20%20%2Fusr%2Fshare%2Fnginx%2Fhtml%3B%5Cn%20%20%20%20%5Ct%7D%5Cn%5Ct%5Ct%7D%5Cn%7D%5Cn%22%7D"}},[a("div",{staticClass:"demo-wrapper"},[a("div",{staticClass:"code-demo-app"})]),s._v(" "),a("div",{staticClass:"code-demo-container"},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下统称为全局块")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义Nginx运行的用户和用户组")]),s._v("\nuser  nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nginx进程数，建议设置为等于CPU总核心数。")]),s._v("\nworker_processes  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]")]),s._v("\nerror_log  /var/log/nginx/error.log warn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进程pid文件")]),s._v("\npid        /var/run/nginx.pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# events块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# worker_connections的数值越大，Nginx的并发能力就越强")]),s._v("\n\nevents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    worker_connections  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include代表引入一个外部文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include       /etc/nginx/mime.types;\tmime.types中存放着大量媒体类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include /etc/nginx/conf.d/*.conf;\t引入了conf.d下以.conf为结尾的配置文件")]),s._v("\n\nhttp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    include       /etc/nginx/mime.types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    default_type  application/octet-stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    log_format  main  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_user")]),s._v(" ["),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$time_local")]),s._v('] "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),s._v("\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$status")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$body_bytes_sent")]),s._v(' "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_referer")]),s._v("\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\""),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_user_agent")]),s._v('" "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_x_forwarded_for")]),s._v("\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    access_log  /var/log/nginx/access.log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    sendfile        on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tcp_nopush     on;")]),s._v("\n\n    keepalive_timeout  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip  on;")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#include /etc/nginx/conf.d/*.conf;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server块")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# listen代表Nginx监听的端口号")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_name代表Nginx接受请求的IP")]),s._v("\n\tserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \tlisten       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \tlisten  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \tserver_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  /var/log/nginx/host.access.log  main;")]),s._v("\n\n\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location块")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root:将接受到的请求根据/usr/share/nginx/html去查找静态资源")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# index:默认去上述的路径中找到index.html或index.htm")]),s._v("\n    \tlocation / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \troot   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \tindex  index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page  404              /404.html;")]),s._v("\n\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redirect server error pages to the static page /50x.html")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    \terror_page   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \tlocation "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \troot   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br")])])]),s._v(" "),a("div",{staticClass:"code-demo-footer"})]),s._v(" "),a("p",[a("strong",[a("code",[s._v("nginx.conf")]),s._v("详细配置示例")])]),s._v(" "),a("div",{staticClass:"code-demo-wrapper",staticStyle:{display:"none"},attrs:{id:"code-demo-a1997726","data-title":"nginx.conf%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B","data-code":"%7B%22bash%22%3A%22%23%23%23%23%23%23Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6nginx.conf%E4%B8%AD%E6%96%87%E8%AF%A6%E8%A7%A3%23%23%23%23%23%5Cn%20%5Cn%23%E5%AE%9A%E4%B9%89Nginx%E8%BF%90%E8%A1%8C%E7%9A%84%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%5Cnuser%20www%20www%3B%5Cn%20%5Cn%23nginx%E8%BF%9B%E7%A8%8B%E6%95%B0%EF%BC%8C%E5%BB%BA%E8%AE%AE%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%AD%89%E4%BA%8ECPU%E6%80%BB%E6%A0%B8%E5%BF%83%E6%95%B0%E3%80%82%5Cnworker_processes%208%3B%5Cn%20%20%5Cn%23%E5%85%A8%E5%B1%80%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%EF%BC%8C%5B%20debug%20%7C%20info%20%7C%20notice%20%7C%20warn%20%7C%20error%20%7C%20crit%20%5D%5Cnerror_log%20%2Fusr%2Flocal%2Fnginx%2Flogs%2Ferror.log%20info%3B%5Cn%20%5Cn%23%E8%BF%9B%E7%A8%8Bpid%E6%96%87%E4%BB%B6%5Cnpid%20%2Fusr%2Flocal%2Fnginx%2Flogs%2Fnginx.pid%3B%5Cn%20%5Cn%23%E6%8C%87%E5%AE%9A%E8%BF%9B%E7%A8%8B%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80%E7%9A%84%E6%9C%80%E5%A4%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6%EF%BC%9A%E6%95%B0%E7%9B%AE%5Cn%23%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%95%B0%E4%B8%8A%E9%99%90%5Cn%23%E8%BF%99%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%98%AF%E6%8C%87%E5%BD%93%E4%B8%80%E4%B8%AAnginx%E8%BF%9B%E7%A8%8B%E6%89%93%E5%BC%80%E7%9A%84%E6%9C%80%E5%A4%9A%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%E6%95%B0%E7%9B%AE%EF%BC%8C%E7%90%86%E8%AE%BA%E5%80%BC%E5%BA%94%E8%AF%A5%E6%98%AF%E6%9C%80%E5%A4%9A%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0%EF%BC%88ulimit%20-n%EF%BC%89%E4%B8%8Enginx%E8%BF%9B%E7%A8%8B%E6%95%B0%E7%9B%B8%E9%99%A4%EF%BC%8C%E4%BD%86%E6%98%AFnginx%E5%88%86%E9%85%8D%E8%AF%B7%E6%B1%82%E5%B9%B6%E4%B8%8D%E6%98%AF%E9%82%A3%E4%B9%88%E5%9D%87%E5%8C%80%EF%BC%8C%E6%89%80%E4%BB%A5%E6%9C%80%E5%A5%BD%E4%B8%8Eulimit%20-n%20%E7%9A%84%E5%80%BC%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%E3%80%82%5Cn%23%E7%8E%B0%E5%9C%A8%E5%9C%A8linux%202.6%E5%86%85%E6%A0%B8%E4%B8%8B%E5%BC%80%E5%90%AF%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%95%B0%E4%B8%BA65535%EF%BC%8Cworker_rlimit_nofile%E5%B0%B1%E7%9B%B8%E5%BA%94%E5%BA%94%E8%AF%A5%E5%A1%AB%E5%86%9965535%E3%80%82%5Cn%23%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BAnginx%E8%B0%83%E5%BA%A6%E6%97%B6%E5%88%86%E9%85%8D%E8%AF%B7%E6%B1%82%E5%88%B0%E8%BF%9B%E7%A8%8B%E5%B9%B6%E4%B8%8D%E6%98%AF%E9%82%A3%E4%B9%88%E7%9A%84%E5%9D%87%E8%A1%A1%EF%BC%8C%E6%89%80%E4%BB%A5%E5%81%87%E5%A6%82%E5%A1%AB%E5%86%9910240%EF%BC%8C%E6%80%BB%E5%B9%B6%E5%8F%91%E9%87%8F%E8%BE%BE%E5%88%B03-4%E4%B8%87%E6%97%B6%E5%B0%B1%E6%9C%89%E8%BF%9B%E7%A8%8B%E5%8F%AF%E8%83%BD%E8%B6%85%E8%BF%8710240%E4%BA%86%EF%BC%8C%E8%BF%99%E6%97%B6%E4%BC%9A%E8%BF%94%E5%9B%9E502%E9%94%99%E8%AF%AF%E3%80%82%5Cnworker_rlimit_nofile%2065535%3B%5Cn%20%5Cnevents%5Cn%7B%5Cn%20%20%20%20%23%E5%8F%82%E8%80%83%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%EF%BC%8Cuse%20%5B%20kqueue%20%7C%20rtsig%20%7C%20epoll%20%7C%20%2Fdev%2Fpoll%20%7C%20select%20%7C%20poll%20%5D%3B%20epoll%E6%A8%A1%E5%9E%8B%5Cn%20%20%20%20%23%E6%98%AFLinux%202.6%E4%BB%A5%E4%B8%8A%E7%89%88%E6%9C%AC%E5%86%85%E6%A0%B8%E4%B8%AD%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%BB%9CI%2FO%E6%A8%A1%E5%9E%8B%EF%BC%8Clinux%E5%BB%BA%E8%AE%AEepoll%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%B7%91%E5%9C%A8FreeBSD%E4%B8%8A%E9%9D%A2%EF%BC%8C%E5%B0%B1%E7%94%A8kqueue%E6%A8%A1%E5%9E%8B%E3%80%82%5Cn%20%20%20%20%23%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%EF%BC%9A%5Cn%20%20%20%20%23%E4%B8%8Eapache%E7%9B%B8%E7%B1%BB%EF%BC%8Cnginx%E9%92%88%E5%AF%B9%E4%B8%8D%E5%90%8C%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E6%9C%89%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%5Cn%20%20%20%20%23A%EF%BC%89%E6%A0%87%E5%87%86%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%5Cn%20%20%20%20%23Select%E3%80%81poll%E5%B1%9E%E4%BA%8E%E6%A0%87%E5%87%86%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E4%B8%8D%E5%AD%98%E5%9C%A8%E6%9B%B4%E6%9C%89%E6%95%88%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8Cnginx%E4%BC%9A%E9%80%89%E6%8B%A9select%E6%88%96poll%5Cn%20%20%20%20%23B%EF%BC%89%E9%AB%98%E6%95%88%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%5Cn%20%20%20%20%23Kqueue%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%BA%8EFreeBSD%204.1%2B%2C%20OpenBSD%202.9%2B%2C%20NetBSD%202.0%20%E5%92%8C%20MacOS%20X.%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84MacOS%20X%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8kqueue%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%80%A0%E6%88%90%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83%E3%80%82%5Cn%20%20%20%20%23Epoll%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%BA%8ELinux%E5%86%85%E6%A0%B82.6%E7%89%88%E6%9C%AC%E5%8F%8A%E4%BB%A5%E5%90%8E%E7%9A%84%E7%B3%BB%E7%BB%9F%E3%80%82%5Cn%20%20%20%20%23%2Fdev%2Fpoll%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%BA%8ESolaris%207%2011%2F99%2B%EF%BC%8CHP%2FUX%2011.22%2B%20(eventport)%EF%BC%8CIRIX%206.5.15%2B%20%E5%92%8C%20Tru64%20UNIX%205.1A%2B%E3%80%82%5Cn%20%20%20%20%23Eventport%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%BA%8ESolaris%2010%E3%80%82%20%E4%B8%BA%E4%BA%86%E9%98%B2%E6%AD%A2%E5%87%BA%E7%8E%B0%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%20%E6%9C%89%E5%BF%85%E8%A6%81%E5%AE%89%E8%A3%85%E5%AE%89%E5%85%A8%E8%A1%A5%E4%B8%81%E3%80%82%5Cn%20%20%20%20use%20epoll%3B%5Cn%20%5Cn%20%20%20%20%23%E5%8D%95%E4%B8%AA%E8%BF%9B%E7%A8%8B%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0%EF%BC%88%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0%3D%E8%BF%9E%E6%8E%A5%E6%95%B0*%E8%BF%9B%E7%A8%8B%E6%95%B0%EF%BC%89%5Cn%20%20%20%20%23%E6%A0%B9%E6%8D%AE%E7%A1%AC%E4%BB%B6%E8%B0%83%E6%95%B4%EF%BC%8C%E5%92%8C%E5%89%8D%E9%9D%A2%E5%B7%A5%E4%BD%9C%E8%BF%9B%E7%A8%8B%E9%85%8D%E5%90%88%E8%B5%B7%E6%9D%A5%E7%94%A8%EF%BC%8C%E5%B0%BD%E9%87%8F%E5%A4%A7%EF%BC%8C%E4%BD%86%E6%98%AF%E5%88%AB%E6%8A%8Acpu%E8%B7%91%E5%88%B0100%25%E5%B0%B1%E8%A1%8C%E3%80%82%E6%AF%8F%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%85%81%E8%AE%B8%E7%9A%84%E6%9C%80%E5%A4%9A%E8%BF%9E%E6%8E%A5%E6%95%B0%EF%BC%8C%E7%90%86%E8%AE%BA%E4%B8%8A%E6%AF%8F%E5%8F%B0nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0%E4%B8%BA%E3%80%82%5Cn%20%20%20%20worker_connections%2065535%3B%5Cn%20%5Cn%20%20%20%20%23keepalive%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%E3%80%82%5Cn%20%20%20%20keepalive_timeout%2060%3B%5Cn%20%5Cn%20%20%20%20%23%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E5%A4%B4%E9%83%A8%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%A4%A7%E5%B0%8F%E3%80%82%E8%BF%99%E4%B8%AA%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E4%BD%A0%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E6%9D%A5%E8%AE%BE%E7%BD%AE%EF%BC%8C%E4%B8%80%E8%88%AC%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E5%A4%B4%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%8D%E4%BC%9A%E8%B6%85%E8%BF%871k%EF%BC%8C%E4%B8%8D%E8%BF%87%E7%94%B1%E4%BA%8E%E4%B8%80%E8%88%AC%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E9%83%BD%E8%A6%81%E5%A4%A7%E4%BA%8E1k%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E9%87%8C%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E3%80%82%5Cn%20%20%20%20%23%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%91%BD%E4%BB%A4getconf%20PAGESIZE%20%E5%8F%96%E5%BE%97%E3%80%82%5Cn%20%20%20%20%23%5Broot%40web001%20~%5D%23%20getconf%20PAGESIZE%5Cn%20%20%20%20%234096%5Cn%20%20%20%20%23%E4%BD%86%E4%B9%9F%E6%9C%89client_header_buffer_size%E8%B6%85%E8%BF%874k%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%8C%E4%BD%86%E6%98%AFclient_header_buffer_size%E8%AF%A5%E5%80%BC%E5%BF%85%E9%A1%BB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E2%80%9C%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E2%80%9D%E7%9A%84%E6%95%B4%E5%80%8D%E6%95%B0%E3%80%82%5Cn%20%20%20%20client_header_buffer_size%204k%3B%5Cn%20%5Cn%20%20%20%20%23%E8%BF%99%E4%B8%AA%E5%B0%86%E4%B8%BA%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%8C%87%E5%AE%9A%E7%BC%93%E5%AD%98%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AF%E6%B2%A1%E6%9C%89%E5%90%AF%E7%94%A8%E7%9A%84%EF%BC%8Cmax%E6%8C%87%E5%AE%9A%E7%BC%93%E5%AD%98%E6%95%B0%E9%87%8F%EF%BC%8C%E5%BB%BA%E8%AE%AE%E5%92%8C%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0%E4%B8%80%E8%87%B4%EF%BC%8Cinactive%E6%98%AF%E6%8C%87%E7%BB%8F%E8%BF%87%E5%A4%9A%E9%95%BF%E6%97%B6%E9%97%B4%E6%96%87%E4%BB%B6%E6%B2%A1%E8%A2%AB%E8%AF%B7%E6%B1%82%E5%90%8E%E5%88%A0%E9%99%A4%E7%BC%93%E5%AD%98%E3%80%82%5Cn%20%20%20%20open_file_cache%20max%3D65535%20inactive%3D60s%3B%5Cn%20%5Cn%20%20%20%20%23%E8%BF%99%E4%B8%AA%E6%98%AF%E6%8C%87%E5%A4%9A%E9%95%BF%E6%97%B6%E9%97%B4%E6%A3%80%E6%9F%A5%E4%B8%80%E6%AC%A1%E7%BC%93%E5%AD%98%E7%9A%84%E6%9C%89%E6%95%88%E4%BF%A1%E6%81%AF%E3%80%82%5Cn%20%20%20%20%23%E8%AF%AD%E6%B3%95%3Aopen_file_cache_valid%20time%20%E9%BB%98%E8%AE%A4%E5%80%BC%3Aopen_file_cache_valid%2060%20%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%3Ahttp%2C%20server%2C%20location%20%E8%BF%99%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%8C%87%E5%AE%9A%E4%BA%86%E4%BD%95%E6%97%B6%E9%9C%80%E8%A6%81%E6%A3%80%E6%9F%A5open_file_cache%E4%B8%AD%E7%BC%93%E5%AD%98%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9C%89%E6%95%88%E4%BF%A1%E6%81%AF.%5Cn%20%20%20%20open_file_cache_valid%2080s%3B%5Cn%20%5Cn%20%20%20%20%23open_file_cache%E6%8C%87%E4%BB%A4%E4%B8%AD%E7%9A%84inactive%E5%8F%82%E6%95%B0%E6%97%B6%E9%97%B4%E5%86%85%E6%96%87%E4%BB%B6%E7%9A%84%E6%9C%80%E5%B0%91%E4%BD%BF%E7%94%A8%E6%AC%A1%E6%95%B0%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%B6%85%E8%BF%87%E8%BF%99%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BC%8C%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%E4%B8%80%E7%9B%B4%E6%98%AF%E5%9C%A8%E7%BC%93%E5%AD%98%E4%B8%AD%E6%89%93%E5%BC%80%E7%9A%84%EF%BC%8C%E5%A6%82%E4%B8%8A%E4%BE%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%9C%A8inactive%E6%97%B6%E9%97%B4%E5%86%85%E4%B8%80%E6%AC%A1%E6%B2%A1%E8%A2%AB%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%AE%83%E5%B0%86%E8%A2%AB%E7%A7%BB%E9%99%A4%E3%80%82%5Cn%20%20%20%20%23%E8%AF%AD%E6%B3%95%3Aopen_file_cache_min_uses%20number%20%E9%BB%98%E8%AE%A4%E5%80%BC%3Aopen_file_cache_min_uses%201%20%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%3Ahttp%2C%20server%2C%20location%20%20%E8%BF%99%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%8C%87%E5%AE%9A%E4%BA%86%E5%9C%A8open_file_cache%E6%8C%87%E4%BB%A4%E6%97%A0%E6%95%88%E7%9A%84%E5%8F%82%E6%95%B0%E4%B8%AD%E4%B8%80%E5%AE%9A%E7%9A%84%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%E5%86%85%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9C%80%E5%B0%8F%E6%96%87%E4%BB%B6%E6%95%B0%2C%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E6%9B%B4%E5%A4%A7%E7%9A%84%E5%80%BC%2C%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%E5%9C%A8cache%E4%B8%AD%E6%80%BB%E6%98%AF%E6%89%93%E5%BC%80%E7%8A%B6%E6%80%81.%5Cn%20%20%20%20open_file_cache_min_uses%201%3B%5Cn%20%20%20%20%20%5Cn%20%20%20%20%23%E8%AF%AD%E6%B3%95%3Aopen_file_cache_errors%20on%20%7C%20off%20%E9%BB%98%E8%AE%A4%E5%80%BC%3Aopen_file_cache_errors%20off%20%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%3Ahttp%2C%20server%2C%20location%20%E8%BF%99%E4%B8%AA%E6%8C%87%E4%BB%A4%E6%8C%87%E5%AE%9A%E6%98%AF%E5%90%A6%E5%9C%A8%E6%90%9C%E7%B4%A2%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E6%98%AF%E8%AE%B0%E5%BD%95cache%E9%94%99%E8%AF%AF.%5Cn%20%20%20%20open_file_cache_errors%20on%3B%5Cn%7D%5Cn%20%20%5Cn%20%20%5Cn%20%20%5Cn%23%E8%AE%BE%E5%AE%9Ahttp%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%88%A9%E7%94%A8%E5%AE%83%E7%9A%84%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%8A%9F%E8%83%BD%E6%8F%90%E4%BE%9B%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%94%AF%E6%8C%81%5Cnhttp%5Cn%7B%5Cn%20%20%20%20%23%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%98%A0%E5%B0%84%E8%A1%A8%5Cn%20%20%20%20include%20%2Fetc%2Fnginx%2Fmime.types%3B%5Cn%20%5Cn%20%20%20%20%23%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%5Cn%20%20%20%20default_type%20application%2Foctet-stream%3B%5Cn%20%5Cn%20%20%20%20%23%E9%BB%98%E8%AE%A4%E7%BC%96%E7%A0%81%5Cn%20%20%20%20%23charset%20utf-8%3B%5Cn%20%5Cn%20%20%20%20%23%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E5%AD%97%E7%9A%84hash%E8%A1%A8%E5%A4%A7%E5%B0%8F%5Cn%20%20%20%20%23%E4%BF%9D%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E5%AD%97%E7%9A%84hash%E8%A1%A8%E6%98%AF%E7%94%B1%E6%8C%87%E4%BB%A4server_names_hash_max_size%20%E5%92%8Cserver_names_hash_bucket_size%E6%89%80%E6%8E%A7%E5%88%B6%E7%9A%84%E3%80%82%E5%8F%82%E6%95%B0hash%20bucket%20size%E6%80%BB%E6%98%AF%E7%AD%89%E4%BA%8Ehash%E8%A1%A8%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%98%AF%E4%B8%80%E8%B7%AF%E5%A4%84%E7%90%86%E5%99%A8%E7%BC%93%E5%AD%98%E5%A4%A7%E5%B0%8F%E7%9A%84%E5%80%8D%E6%95%B0%E3%80%82%E5%9C%A8%E5%87%8F%E5%B0%91%E4%BA%86%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%8F%96%E6%AC%A1%E6%95%B0%E5%90%8E%EF%BC%8C%E4%BD%BF%E5%9C%A8%E5%A4%84%E7%90%86%E5%99%A8%E4%B8%AD%E5%8A%A0%E9%80%9F%E6%9F%A5%E6%89%BEhash%E8%A1%A8%E9%94%AE%E5%80%BC%E6%88%90%E4%B8%BA%E5%8F%AF%E8%83%BD%E3%80%82%E5%A6%82%E6%9E%9Chash%20bucket%20size%E7%AD%89%E4%BA%8E%E4%B8%80%E8%B7%AF%E5%A4%84%E7%90%86%E5%99%A8%E7%BC%93%E5%AD%98%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E9%82%A3%E4%B9%88%E5%9C%A8%E6%9F%A5%E6%89%BE%E9%94%AE%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%9C%80%E5%9D%8F%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E6%9F%A5%E6%89%BE%E7%9A%84%E6%AC%A1%E6%95%B0%E4%B8%BA2%E3%80%82%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%98%AF%E7%A1%AE%E5%AE%9A%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83%E7%9A%84%E5%9C%B0%E5%9D%80%EF%BC%8C%E7%AC%AC%E4%BA%8C%E6%AC%A1%E6%98%AF%E5%9C%A8%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83%E4%B8%AD%E6%9F%A5%E6%89%BE%E9%94%AE%20%E5%80%BC%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%A6%82%E6%9E%9CNginx%E7%BB%99%E5%87%BA%E9%9C%80%E8%A6%81%E5%A2%9E%E5%A4%A7hash%20max%20size%20%E6%88%96%20hash%20bucket%20size%E7%9A%84%E6%8F%90%E7%A4%BA%EF%BC%8C%E9%82%A3%E4%B9%88%E9%A6%96%E8%A6%81%E7%9A%84%E6%98%AF%E5%A2%9E%E5%A4%A7%E5%89%8D%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E5%A4%A7%E5%B0%8F.%5Cn%20%20%20%20server_names_hash_bucket_size%20128%3B%5Cn%20%5Cn%20%20%20%20%23%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E5%A4%B4%E9%83%A8%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%A4%A7%E5%B0%8F%E3%80%82%E8%BF%99%E4%B8%AA%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E4%BD%A0%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E6%9D%A5%E8%AE%BE%E7%BD%AE%EF%BC%8C%E4%B8%80%E8%88%AC%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E7%9A%84%E5%A4%B4%E9%83%A8%E5%A4%A7%E5%B0%8F%E4%B8%8D%E4%BC%9A%E8%B6%85%E8%BF%871k%EF%BC%8C%E4%B8%8D%E8%BF%87%E7%94%B1%E4%BA%8E%E4%B8%80%E8%88%AC%E7%B3%BB%E7%BB%9F%E5%88%86%E9%A1%B5%E9%83%BD%E8%A6%81%E5%A4%A7%E4%BA%8E1k%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%99%E9%87%8C%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E3%80%82%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%91%BD%E4%BB%A4getconf%20PAGESIZE%E5%8F%96%E5%BE%97%E3%80%82%5Cn%20%20%20%20client_header_buffer_size%2032k%3B%5Cn%20%5Cn%20%20%20%20%23%E5%AE%A2%E6%88%B7%E8%AF%B7%E6%B1%82%E5%A4%B4%E7%BC%93%E5%86%B2%E5%A4%A7%E5%B0%8F%E3%80%82nginx%E9%BB%98%E8%AE%A4%E4%BC%9A%E7%94%A8client_header_buffer_size%E8%BF%99%E4%B8%AAbuffer%E6%9D%A5%E8%AF%BB%E5%8F%96header%E5%80%BC%EF%BC%8C%E5%A6%82%E6%9E%9Cheader%E8%BF%87%E5%A4%A7%EF%BC%8C%E5%AE%83%E4%BC%9A%E4%BD%BF%E7%94%A8large_client_header_buffers%E6%9D%A5%E8%AF%BB%E5%8F%96%E3%80%82%5Cn%20%20%20%20large_client_header_buffers%204%2064k%3B%5Cn%20%5Cn%20%20%20%20%23%E8%AE%BE%E5%AE%9A%E9%80%9A%E8%BF%87nginx%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F%5Cn%20%20%20%20client_max_body_size%208m%3B%5Cn%20%5Cn%20%20%20%20%23%E5%BC%80%E5%90%AF%E9%AB%98%E6%95%88%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F%EF%BC%8Csendfile%E6%8C%87%E4%BB%A4%E6%8C%87%E5%AE%9Anginx%E6%98%AF%E5%90%A6%E8%B0%83%E7%94%A8sendfile%E5%87%BD%E6%95%B0%E6%9D%A5%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%AF%B9%E4%BA%8E%E6%99%AE%E9%80%9A%E5%BA%94%E7%94%A8%E8%AE%BE%E4%B8%BA%20on%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%94%A8%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%BA%94%E7%94%A8%E7%A3%81%E7%9B%98IO%E9%87%8D%E8%B4%9F%E8%BD%BD%E5%BA%94%E7%94%A8%EF%BC%8C%E5%8F%AF%E8%AE%BE%E7%BD%AE%E4%B8%BAoff%EF%BC%8C%E4%BB%A5%E5%B9%B3%E8%A1%A1%E7%A3%81%E7%9B%98%E4%B8%8E%E7%BD%91%E7%BB%9CI%2FO%E5%A4%84%E7%90%86%E9%80%9F%E5%BA%A6%EF%BC%8C%E9%99%8D%E4%BD%8E%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%B4%9F%E8%BD%BD%E3%80%82%E6%B3%A8%E6%84%8F%EF%BC%9A%E5%A6%82%E6%9E%9C%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA%E4%B8%8D%E6%AD%A3%E5%B8%B8%E6%8A%8A%E8%BF%99%E4%B8%AA%E6%94%B9%E6%88%90off%E3%80%82%5Cn%20%20%20%20%23sendfile%E6%8C%87%E4%BB%A4%E6%8C%87%E5%AE%9A%20nginx%20%E6%98%AF%E5%90%A6%E8%B0%83%E7%94%A8sendfile%20%E5%87%BD%E6%95%B0%EF%BC%88zero%20copy%20%E6%96%B9%E5%BC%8F%EF%BC%89%E6%9D%A5%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6%EF%BC%8C%E5%AF%B9%E4%BA%8E%E6%99%AE%E9%80%9A%E5%BA%94%E7%94%A8%EF%BC%8C%E5%BF%85%E9%A1%BB%E8%AE%BE%E4%B8%BAon%E3%80%82%E5%A6%82%E6%9E%9C%E7%94%A8%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%BA%94%E7%94%A8%E7%A3%81%E7%9B%98IO%E9%87%8D%E8%B4%9F%E8%BD%BD%E5%BA%94%E7%94%A8%EF%BC%8C%E5%8F%AF%E8%AE%BE%E7%BD%AE%E4%B8%BAoff%EF%BC%8C%E4%BB%A5%E5%B9%B3%E8%A1%A1%E7%A3%81%E7%9B%98%E4%B8%8E%E7%BD%91%E7%BB%9CIO%E5%A4%84%E7%90%86%E9%80%9F%E5%BA%A6%EF%BC%8C%E9%99%8D%E4%BD%8E%E7%B3%BB%E7%BB%9Fuptime%E3%80%82%5Cn%20%20%20%20sendfile%20on%3B%5Cn%20%5Cn%20%20%20%20%23%E5%BC%80%E5%90%AF%E7%9B%AE%E5%BD%95%E5%88%97%E8%A1%A8%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%90%88%E9%80%82%E4%B8%8B%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%85%B3%E9%97%AD%E3%80%82%5Cn%20%20%20%20autoindex%20on%3B%5Cn%20%5Cn%20%20%20%20%23%E6%AD%A4%E9%80%89%E9%A1%B9%E5%85%81%E8%AE%B8%E6%88%96%E7%A6%81%E6%AD%A2%E4%BD%BF%E7%94%A8socke%E7%9A%84TCP_CORK%E7%9A%84%E9%80%89%E9%A1%B9%EF%BC%8C%E6%AD%A4%E9%80%89%E9%A1%B9%E4%BB%85%E5%9C%A8%E4%BD%BF%E7%94%A8sendfile%E7%9A%84%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%5Cn%20%20%20%20tcp_nopush%20on%3B%5Cn%20%20%20%20%20%20%5Cn%20%20%20%20tcp_nodelay%20on%3B%5Cn%20%5Cn%20%20%20%20%23%E9%95%BF%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%98%AF%E7%A7%92%5Cn%20%20%20%20keepalive_timeout%20120%3B%5Cn%20%5Cn%20%20%20%20%23FastCGI%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%E6%98%AF%E4%B8%BA%E4%BA%86%E6%94%B9%E5%96%84%E7%BD%91%E7%AB%99%E7%9A%84%E6%80%A7%E8%83%BD%EF%BC%9A%E5%87%8F%E5%B0%91%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%EF%BC%8C%E6%8F%90%E9%AB%98%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6%E3%80%82%E4%B8%8B%E9%9D%A2%E5%8F%82%E6%95%B0%E7%9C%8B%E5%AD%97%E9%9D%A2%E6%84%8F%E6%80%9D%E9%83%BD%E8%83%BD%E7%90%86%E8%A7%A3%E3%80%82%5Cn%20%20%20%20fastcgi_connect_timeout%20300%3B%5Cn%20%20%20%20fastcgi_send_timeout%20300%3B%5Cn%20%20%20%20fastcgi_read_timeout%20300%3B%5Cn%20%20%20%20fastcgi_buffer_size%2064k%3B%5Cn%20%20%20%20fastcgi_buffers%204%2064k%3B%5Cn%20%20%20%20fastcgi_busy_buffers_size%20128k%3B%5Cn%20%20%20%20fastcgi_temp_file_write_size%20128k%3B%5Cn%20%5Cn%20%20%20%20%23gzip%E6%A8%A1%E5%9D%97%E8%AE%BE%E7%BD%AE%5Cn%20%20%20%20gzip%20on%3B%20%23%E5%BC%80%E5%90%AFgzip%E5%8E%8B%E7%BC%A9%E8%BE%93%E5%87%BA%5Cn%20%20%20%20gzip_min_length%201k%3B%20%20%20%20%23%E6%9C%80%E5%B0%8F%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%5Cn%20%20%20%20gzip_buffers%204%2016k%3B%20%20%20%20%23%E5%8E%8B%E7%BC%A9%E7%BC%93%E5%86%B2%E5%8C%BA%5Cn%20%20%20%20gzip_http_version%201.0%3B%20%20%20%20%23%E5%8E%8B%E7%BC%A9%E7%89%88%E6%9C%AC%EF%BC%88%E9%BB%98%E8%AE%A41.1%EF%BC%8C%E5%89%8D%E7%AB%AF%E5%A6%82%E6%9E%9C%E6%98%AFsquid2.5%E8%AF%B7%E4%BD%BF%E7%94%A81.0%EF%BC%89%5Cn%20%20%20%20gzip_comp_level%202%3B%20%20%20%20%23%E5%8E%8B%E7%BC%A9%E7%AD%89%E7%BA%A7%5Cn%20%20%20%20gzip_types%20text%2Fplain%20application%2Fx-javascript%20text%2Fcss%20application%2Fxml%3B%20%20%20%20%23%E5%8E%8B%E7%BC%A9%E7%B1%BB%E5%9E%8B%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%B0%B1%E5%B7%B2%E7%BB%8F%E5%8C%85%E5%90%ABtextml%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8B%E9%9D%A2%E5%B0%B1%E4%B8%8D%E7%94%A8%E5%86%8D%E5%86%99%E4%BA%86%EF%BC%8C%E5%86%99%E4%B8%8A%E5%8E%BB%E4%B9%9F%E4%B8%8D%E4%BC%9A%E6%9C%89%E9%97%AE%E9%A2%98%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BC%9A%E6%9C%89%E4%B8%80%E4%B8%AAwarn%E3%80%82%5Cn%20%20%20%20gzip_vary%20on%3B%5Cn%20%5Cn%20%20%20%20%23%E5%BC%80%E5%90%AF%E9%99%90%E5%88%B6IP%E8%BF%9E%E6%8E%A5%E6%95%B0%E7%9A%84%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%5Cn%20%20%20%20%23limit_zone%20crawler%20%24binary_remote_addr%2010m%3B%5Cn%20%5Cn%20%5Cn%20%5Cn%20%20%20%20%23%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20upstream%20piao.jd.com%20%7B%5Cn%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23upstream%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%8Cweight%E6%98%AF%E6%9D%83%E9%87%8D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E6%9C%BA%E5%99%A8%E9%85%8D%E7%BD%AE%E5%AE%9A%E4%B9%89%E6%9D%83%E9%87%8D%E3%80%82weigth%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA%E6%9D%83%E5%80%BC%EF%BC%8C%E6%9D%83%E5%80%BC%E8%B6%8A%E9%AB%98%E8%A2%AB%E5%88%86%E9%85%8D%E5%88%B0%E7%9A%84%E5%87%A0%E7%8E%87%E8%B6%8A%E5%A4%A7%E3%80%82%5Cn%20%20%20%20%20%20%20%20server%20192.168.80.121%3A80%20weight%3D3%3B%5Cn%20%20%20%20%20%20%20%20server%20192.168.80.122%3A80%20weight%3D2%3B%5Cn%20%20%20%20%20%20%20%20server%20192.168.80.123%3A80%20weight%3D3%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23nginx%E7%9A%84upstream%E7%9B%AE%E5%89%8D%E6%94%AF%E6%8C%814%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E5%88%86%E9%85%8D%5Cn%20%20%20%20%20%20%20%20%231%E3%80%81%E8%BD%AE%E8%AF%A2%EF%BC%88%E9%BB%98%E8%AE%A4%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%23%E6%AF%8F%E4%B8%AA%E8%AF%B7%E6%B1%82%E6%8C%89%E6%97%B6%E9%97%B4%E9%A1%BA%E5%BA%8F%E9%80%90%E4%B8%80%E5%88%86%E9%85%8D%E5%88%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8down%E6%8E%89%EF%BC%8C%E8%83%BD%E8%87%AA%E5%8A%A8%E5%89%94%E9%99%A4%E3%80%82%5Cn%20%20%20%20%20%20%20%20%232%E3%80%81weight%5Cn%20%20%20%20%20%20%20%20%23%E6%8C%87%E5%AE%9A%E8%BD%AE%E8%AF%A2%E5%87%A0%E7%8E%87%EF%BC%8Cweight%E5%92%8C%E8%AE%BF%E9%97%AE%E6%AF%94%E7%8E%87%E6%88%90%E6%AD%A3%E6%AF%94%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD%E4%B8%8D%E5%9D%87%E7%9A%84%E6%83%85%E5%86%B5%E3%80%82%5Cn%20%20%20%20%20%20%20%20%23%E4%BE%8B%E5%A6%82%EF%BC%9A%5Cn%20%20%20%20%20%20%20%20%23upstream%20bakend%20%7B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20192.168.0.14%20weight%3D10%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20192.168.0.15%20weight%3D10%3B%5Cn%20%20%20%20%20%20%20%20%23%7D%5Cn%20%20%20%20%20%20%20%20%232%E3%80%81ip_hash%5Cn%20%20%20%20%20%20%20%20%23%E6%AF%8F%E4%B8%AA%E8%AF%B7%E6%B1%82%E6%8C%89%E8%AE%BF%E9%97%AEip%E7%9A%84hash%E7%BB%93%E6%9E%9C%E5%88%86%E9%85%8D%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%AF%8F%E4%B8%AA%E8%AE%BF%E5%AE%A2%E5%9B%BA%E5%AE%9A%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%AA%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%A7%A3%E5%86%B3session%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%82%5Cn%20%20%20%20%20%20%20%20%23%E4%BE%8B%E5%A6%82%EF%BC%9A%5Cn%20%20%20%20%20%20%20%20%23upstream%20bakend%20%7B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20ip_hash%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20192.168.0.14%3A88%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20192.168.0.15%3A80%3B%5Cn%20%20%20%20%20%20%20%20%23%7D%5Cn%20%20%20%20%20%20%20%20%233%E3%80%81fair%EF%BC%88%E7%AC%AC%E4%B8%89%E6%96%B9%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%23%E6%8C%89%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%E6%9D%A5%E5%88%86%E9%85%8D%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4%E7%9F%AD%E7%9A%84%E4%BC%98%E5%85%88%E5%88%86%E9%85%8D%E3%80%82%5Cn%20%20%20%20%20%20%20%20%23upstream%20backend%20%7B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20server1%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20server2%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20fair%3B%5Cn%20%20%20%20%20%20%20%20%23%7D%5Cn%20%20%20%20%20%20%20%20%234%E3%80%81url_hash%EF%BC%88%E7%AC%AC%E4%B8%89%E6%96%B9%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%23%E6%8C%89%E8%AE%BF%E9%97%AEurl%E7%9A%84hash%E7%BB%93%E6%9E%9C%E6%9D%A5%E5%88%86%E9%85%8D%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%BD%BF%E6%AF%8F%E4%B8%AAurl%E5%AE%9A%E5%90%91%E5%88%B0%E5%90%8C%E4%B8%80%E4%B8%AA%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%BA%E7%BC%93%E5%AD%98%E6%97%B6%E6%AF%94%E8%BE%83%E6%9C%89%E6%95%88%E3%80%82%5Cn%20%20%20%20%20%20%20%20%23%E4%BE%8B%EF%BC%9A%E5%9C%A8upstream%E4%B8%AD%E5%8A%A0%E5%85%A5hash%E8%AF%AD%E5%8F%A5%EF%BC%8Cserver%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%B8%8D%E8%83%BD%E5%86%99%E5%85%A5weight%E7%AD%89%E5%85%B6%E4%BB%96%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8Chash_method%E6%98%AF%E4%BD%BF%E7%94%A8%E7%9A%84hash%E7%AE%97%E6%B3%95%5Cn%20%20%20%20%20%20%20%20%23upstream%20backend%20%7B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20squid1%3A3128%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20squid2%3A3128%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20hash%20%24request_uri%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20hash_method%20crc32%3B%5Cn%20%20%20%20%20%20%20%20%23%7D%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23tips%3A%5Cn%20%20%20%20%20%20%20%20%23upstream%20bakend%7B%23%E5%AE%9A%E4%B9%89%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%AE%BE%E5%A4%87%E7%9A%84Ip%E5%8F%8A%E8%AE%BE%E5%A4%87%E7%8A%B6%E6%80%81%7D%7B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20ip_hash%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20127.0.0.1%3A9090%20down%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20127.0.0.1%3A8080%20weight%3D2%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20127.0.0.1%3A6060%3B%5Cn%20%20%20%20%20%20%20%20%23%20%20%20%20server%20127.0.0.1%3A7070%20backup%3B%5Cn%20%20%20%20%20%20%20%20%23%7D%5Cn%20%20%20%20%20%20%20%20%23%E5%9C%A8%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84server%E4%B8%AD%E5%A2%9E%E5%8A%A0%20proxy_pass%20http%3A%2F%2Fbakend%2F%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23%E6%AF%8F%E4%B8%AA%E8%AE%BE%E5%A4%87%E7%9A%84%E7%8A%B6%E6%80%81%E8%AE%BE%E7%BD%AE%E4%B8%BA%3A%5Cn%20%20%20%20%20%20%20%20%231.down%E8%A1%A8%E7%A4%BA%E5%8D%95%E5%89%8D%E7%9A%84server%E6%9A%82%E6%97%B6%E4%B8%8D%E5%8F%82%E4%B8%8E%E8%B4%9F%E8%BD%BD%5Cn%20%20%20%20%20%20%20%20%232.weight%E4%B8%BAweight%E8%B6%8A%E5%A4%A7%EF%BC%8C%E8%B4%9F%E8%BD%BD%E7%9A%84%E6%9D%83%E9%87%8D%E5%B0%B1%E8%B6%8A%E5%A4%A7%E3%80%82%5Cn%20%20%20%20%20%20%20%20%233.max_fails%EF%BC%9A%E5%85%81%E8%AE%B8%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%AC%A1%E6%95%B0%E9%BB%98%E8%AE%A4%E4%B8%BA1.%E5%BD%93%E8%B6%85%E8%BF%87%E6%9C%80%E5%A4%A7%E6%AC%A1%E6%95%B0%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9Eproxy_next_upstream%E6%A8%A1%E5%9D%97%E5%AE%9A%E4%B9%89%E7%9A%84%E9%94%99%E8%AF%AF%5Cn%20%20%20%20%20%20%20%20%234.fail_timeout%3Amax_fails%E6%AC%A1%E5%A4%B1%E8%B4%A5%E5%90%8E%EF%BC%8C%E6%9A%82%E5%81%9C%E7%9A%84%E6%97%B6%E9%97%B4%E3%80%82%5Cn%20%20%20%20%20%20%20%20%235.backup%EF%BC%9A%20%E5%85%B6%E5%AE%83%E6%89%80%E6%9C%89%E7%9A%84%E9%9D%9Ebackup%E6%9C%BA%E5%99%A8down%E6%88%96%E8%80%85%E5%BF%99%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E8%AF%B7%E6%B1%82backup%E6%9C%BA%E5%99%A8%E3%80%82%E6%89%80%E4%BB%A5%E8%BF%99%E5%8F%B0%E6%9C%BA%E5%99%A8%E5%8E%8B%E5%8A%9B%E4%BC%9A%E6%9C%80%E8%BD%BB%E3%80%82%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23nginx%E6%94%AF%E6%8C%81%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%A4%9A%E7%BB%84%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%8C%E7%94%A8%E6%9D%A5%E7%BB%99%E4%B8%8D%E7%94%A8%E7%9A%84server%E6%9D%A5%E4%BD%BF%E7%94%A8%E3%80%82%5Cn%20%20%20%20%20%20%20%20%23client_body_in_file_only%E8%AE%BE%E7%BD%AE%E4%B8%BAOn%20%E5%8F%AF%E4%BB%A5%E8%AE%B2client%20post%E8%BF%87%E6%9D%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AE%B0%E5%BD%95%E5%88%B0%E6%96%87%E4%BB%B6%E4%B8%AD%E7%94%A8%E6%9D%A5%E5%81%9Adebug%5Cn%20%20%20%20%20%20%20%20%23client_body_temp_path%E8%AE%BE%E7%BD%AE%E8%AE%B0%E5%BD%95%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95%20%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%9A3%E5%B1%82%E7%9B%AE%E5%BD%95%5Cn%20%20%20%20%20%20%20%20%23location%E5%AF%B9URL%E8%BF%9B%E8%A1%8C%E5%8C%B9%E9%85%8D.%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E9%87%8D%E5%AE%9A%E5%90%91%E6%88%96%E8%80%85%E8%BF%9B%E8%A1%8C%E6%96%B0%E7%9A%84%E4%BB%A3%E7%90%86%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%5Cn%20%20%20%20%7D%5Cn%22%7D"}},[a("div",{staticClass:"demo-wrapper"},[a("div",{staticClass:"code-demo-app"})]),s._v(" "),a("div",{staticClass:"code-demo-container"},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######Nginx配置文件nginx.conf中文详解#####")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义Nginx运行的用户和用户组")]),s._v("\nuser www www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nginx进程数，建议设置为等于CPU总核心数。")]),s._v("\nworker_processes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]")]),s._v("\nerror_log /usr/local/nginx/logs/error.log info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进程pid文件")]),s._v("\npid /usr/local/nginx/logs/nginx.pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定进程可以打开的最大描述符：数目")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#工作模式与连接数上限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个指令是指当一个nginx进程打开的最多文件描述符数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -n 的值保持一致。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#现在在linux 2.6内核下开启文件打开数为65535，worker_rlimit_nofile就相应应该填写65535。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。")]),s._v("\nworker_rlimit_nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \nevents\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是Linux 2.6以上版本内核中的高性能网络I/O模型，linux建议epoll，如果跑在FreeBSD上面，就用kqueue模型。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#补充说明：")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#与apache相类，nginx针对不同的操作系统，有不同的事件模型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#A）标准事件模型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Select、poll属于标准事件模型，如果当前系统不存在更有效的方法，nginx会选择select或poll")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#B）高效事件模型")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Kqueue：使用于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使用双处理器的MacOS X系统使用kqueue可能会造成内核崩溃。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Epoll：使用于Linux内核2.6版本及以后的系统。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/dev/poll：使用于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Eventport：使用于Solaris 10。 为了防止出现内核崩溃的问题， 有必要安装安全补丁。")]),s._v("\n    use epoll"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#单个进程最大连接数（最大连接数=连接数*进程数）")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#根据硬件调整，和前面工作进程配合起来用，尽量大，但是别把cpu跑到100%就行。每个进程允许的最多连接数，理论上每台nginx服务器的最大连接数为。")]),s._v("\n    worker_connections "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#keepalive超时时间。")]),s._v("\n    keepalive_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求头的大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分页大小可以用命令getconf PAGESIZE 取得。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#[root@web001 ~]# getconf PAGESIZE")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4096")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页大小”的整倍数。")]),s._v("\n    client_header_buffer_size 4k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个将为打开文件指定缓存，默认是没有启用的，max指定缓存数量，建议和打开文件数一致，inactive是指经过多长时间文件没被请求后删除缓存。")]),s._v("\n    open_file_cache "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inactive")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("60s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个是指多长时间检查一次缓存的有效信息。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#语法:open_file_cache_valid time 默认值:open_file_cache_valid 60 使用字段:http, server, location 这个指令指定了何时需要检查open_file_cache中缓存项目的有效信息.")]),s._v("\n    open_file_cache_valid 80s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#open_file_cache指令中的inactive参数时间内文件的最少使用次数，如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个文件在inactive时间内一次没被使用，它将被移除。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#语法:open_file_cache_min_uses number 默认值:open_file_cache_min_uses 1 使用字段:http, server, location  这个指令指定了在open_file_cache指令无效的参数中一定的时间范围内可以使用的最小文件数,如果使用更大的值,文件描述符在cache中总是打开状态.")]),s._v("\n    open_file_cache_min_uses "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#语法:open_file_cache_errors on | off 默认值:open_file_cache_errors off 使用字段:http, server, location 这个指令指定是否在搜索一个文件是记录cache错误.")]),s._v("\n    open_file_cache_errors on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  \n  \n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设定http服务器，利用它的反向代理功能提供负载均衡支持")]),s._v("\nhttp\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#文件扩展名与文件类型映射表")]),s._v("\n    include /etc/nginx/mime.types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认文件类型")]),s._v("\n    default_type application/octet-stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认编码")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset utf-8;")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务器名字的hash表大小")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表的大小，并且是一路处理器缓存大小的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找hash表键值成为可能。如果hash bucket size等于一路处理器缓存的大小，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第一次是确定存储单元的地址，第二次是在存储单元中查找键 值。因此，如果Nginx给出需要增大hash max size 或 hash bucket size的提示，那么首要的是增大前一个参数的大小.")]),s._v("\n    server_names_hash_bucket_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求的头部大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。分页大小可以用命令getconf PAGESIZE取得。")]),s._v("\n    client_header_buffer_size 32k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户请求头缓冲大小。nginx默认会用client_header_buffer_size这个buffer来读取header值，如果header过大，它会使用large_client_header_buffers来读取。")]),s._v("\n    large_client_header_buffers "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 64k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设定通过nginx上传文件的大小")]),s._v("\n    client_max_body_size 8m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sendfile指令指定 nginx 是否调用sendfile 函数（zero copy 方式）来输出文件，对于普通应用，必须设为on。如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络IO处理速度，降低系统uptime。")]),s._v("\n    sendfile on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启目录列表访问，合适下载服务器，默认关闭。")]),s._v("\n    autoindex on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用")]),s._v("\n    tcp_nopush on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      \n    tcp_nodelay on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#长连接超时时间，单位是秒")]),s._v("\n    keepalive_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#FastCGI相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。")]),s._v("\n    fastcgi_connect_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_send_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_read_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_buffer_size 64k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_buffers "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 64k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_busy_buffers_size 128k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_temp_file_write_size 128k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip模块设置")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启gzip压缩输出")]),s._v("\n    gzip_min_length 1k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最小压缩文件大小")]),s._v("\n    gzip_buffers "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 16k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#压缩缓冲区")]),s._v("\n    gzip_http_version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#压缩版本（默认1.1，前端如果是squid2.5请使用1.0）")]),s._v("\n    gzip_comp_level "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#压缩等级")]),s._v("\n    gzip_types text/plain application/x-javascript text/css application/xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#压缩类型，默认就已经包含textml，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。")]),s._v("\n    gzip_vary on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启限制IP连接数的时候需要使用")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#limit_zone crawler $binary_remote_addr 10m;")]),s._v("\n \n \n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#负载均衡配置")]),s._v("\n    upstream piao.jd.com "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。")]),s._v("\n        server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".80.121:80 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".80.122:80 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".80.123:80 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nginx的upstream目前支持4种方式的分配")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1、轮询（默认）")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、weight")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#例如：")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream bakend {")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 192.168.0.14 weight=10;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 192.168.0.15 weight=10;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、ip_hash")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#例如：")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream bakend {")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    ip_hash;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 192.168.0.14:88;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 192.168.0.15:80;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3、fair（第三方）")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#按后端服务器的响应时间来分配请求，响应时间短的优先分配。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream backend {")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server server1;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server server2;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    fair;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4、url_hash（第三方）")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#例：在upstream中加入hash语句，server语句中不能写入weight等其他的参数，hash_method是使用的hash算法")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream backend {")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server squid1:3128;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server squid2:3128;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    hash $request_uri;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    hash_method crc32;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tips:")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#upstream bakend{#定义负载均衡设备的Ip及设备状态}{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    ip_hash;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 127.0.0.1:9090 down;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 127.0.0.1:8080 weight=2;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 127.0.0.1:6060;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    server 127.0.0.1:7070 backup;")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在需要使用负载均衡的server中增加 proxy_pass http://bakend/;")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每个设备的状态设置为:")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1.down表示单前的server暂时不参与负载")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2.weight为weight越大，负载的权重就越大。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3.max_fails：允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream模块定义的错误")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4.fail_timeout:max_fails次失败后，暂停的时间。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5.backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nginx支持同时设置多组的负载均衡，用来给不用的server来使用。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#client_body_in_file_only设置为On 可以讲client post过来的数据记录到文件中用来做debug")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#client_body_temp_path设置记录文件的目录 可以设置最多3层目录")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location对URL进行匹配.可以进行重定向或者进行新的代理 负载均衡")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br")])])]),s._v(" "),a("div",{staticClass:"code-demo-footer"})]),s._v(" "),a("h3",{attrs:{id:"default-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default-conf"}},[s._v("#")]),s._v(" default.conf")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("是"),a("code",[s._v("nginx.conf")]),s._v("中通过"),a("code",[s._v("include")]),s._v("引入的配置")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("include /etc/nginx/conf.d/*.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("默认在"),a("code",[s._v("/etc/nginx/conf.d/")]),s._v("中")]),s._v(" "),a("p",[a("code",[s._v("default.conf")]),s._v("默认配置示例")]),s._v(" "),a("div",{staticClass:"code-demo-wrapper",staticStyle:{display:"none"},attrs:{id:"code-demo-0a9f80f0","data-title":"default.conf%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B","data-code":"%7B%22bash%22%3A%22%23%20server%E5%9D%97%5Cn%23%20listen%E4%BB%A3%E8%A1%A8Nginx%E7%9B%91%E5%90%AC%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7%5Cn%23%20server_name%E4%BB%A3%E8%A1%A8Nginx%E6%8E%A5%E5%8F%97%E8%AF%B7%E6%B1%82%E7%9A%84IP%5Cnserver%20%7B%5Cn%20%20%20%20listen%20%20%20%20%20%20%2080%3B%5Cn%20%20%20%20listen%20%20%5B%3A%3A%5D%3A80%3B%5Cn%20%20%20%20server_name%20%20localhost%3B%5Cn%5Cn%20%20%20%20%23charset%20koi8-r%3B%5Cn%20%20%20%20%23access_log%20%20%2Fvar%2Flog%2Fnginx%2Fhost.access.log%20%20main%3B%5Cn%5Cn%5Cn%20%20%20%20%23location%E5%9D%97%5Cn%20%20%20%20%23%20root%3A%E5%B0%86%E6%8E%A5%E5%8F%97%E5%88%B0%E7%9A%84%E8%AF%B7%E6%B1%82%E6%A0%B9%E6%8D%AE%2Fusr%2Fshare%2Fnginx%2Fhtml%E5%8E%BB%E6%9F%A5%E6%89%BE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%5Cn%20%20%20%20%23%20index%3A%E9%BB%98%E8%AE%A4%E5%8E%BB%E4%B8%8A%E8%BF%B0%E7%9A%84%E8%B7%AF%E5%BE%84%E4%B8%AD%E6%89%BE%E5%88%B0index.html%E6%88%96index.htm%5Cn%20%20%20%20location%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20root%20%20%20%2Fusr%2Fshare%2Fnginx%2Fhtml%3B%5Cn%20%20%20%20%20%20%20%20index%20%20index.html%20index.htm%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%23error_page%20%20404%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F404.html%3B%5Cn%5Cn%20%20%20%20%23%20redirect%20server%20error%20pages%20to%20the%20static%20page%20%2F50x.html%5Cn%20%20%20%20%23%5Cn%20%20%20%20error_page%20%20%20500%20502%20503%20504%20%20%2F50x.html%3B%5Cn%20%20%20%20location%20%3D%20%2F50x.html%20%7B%5Cn%20%20%20%20%20%20%20%20root%20%20%20%2Fusr%2Fshare%2Fnginx%2Fhtml%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%23%20proxy%20the%20PHP%20scripts%20to%20Apache%20listening%20on%20127.0.0.1%3A80%5Cn%20%20%20%20%23%5Cn%20%20%20%20%23location%20~%20%5C%5C.php%24%20%7B%5Cn%20%20%20%20%23%20%20%20%20proxy_pass%20%20%20http%3A%2F%2F127.0.0.1%3B%5Cn%20%20%20%20%23%7D%5Cn%5Cn%20%20%20%20%23%20pass%20the%20PHP%20scripts%20to%20FastCGI%20server%20listening%20on%20127.0.0.1%3A9000%5Cn%20%20%20%20%23%5Cn%20%20%20%20%23location%20~%20%5C%5C.php%24%20%7B%5Cn%20%20%20%20%23%20%20%20%20root%20%20%20%20%20%20%20%20%20%20%20html%3B%5Cn%20%20%20%20%23%20%20%20%20fastcgi_pass%20%20%20127.0.0.1%3A9000%3B%5Cn%20%20%20%20%23%20%20%20%20fastcgi_index%20%20index.php%3B%5Cn%20%20%20%20%23%20%20%20%20fastcgi_param%20%20SCRIPT_FILENAME%20%20%2Fscripts%24fastcgi_script_name%3B%5Cn%20%20%20%20%23%20%20%20%20include%20%20%20%20%20%20%20%20fastcgi_params%3B%5Cn%20%20%20%20%23%7D%5Cn%5Cn%20%20%20%20%23%20deny%20access%20to%20.htaccess%20files%2C%20if%20Apache's%20document%20root%5Cn%20%20%20%20%23%20concurs%20with%20nginx's%20one%5Cn%20%20%20%20%23%5Cn%20%20%20%20%23location%20~%20%2F%5C%5C.ht%20%7B%5Cn%20%20%20%20%23%20%20%20%20deny%20%20all%3B%5Cn%20%20%20%20%23%7D%5Cn%7D%5Cn%5Cn%22%7D"}},[a("div",{staticClass:"demo-wrapper"},[a("div",{staticClass:"code-demo-app"})]),s._v(" "),a("div",{staticClass:"code-demo-container"},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# listen代表Nginx监听的端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server_name代表Nginx接受请求的IP")]),s._v("\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    listen  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  /var/log/nginx/host.access.log  main;")]),s._v("\n\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location块")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root:将接受到的请求根据/usr/share/nginx/html去查找静态资源")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# index:默认去上述的路径中找到index.html或index.htm")]),s._v("\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index  index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page  404              /404.html;")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redirect server error pages to the static page /50x.html")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    error_page   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   /usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxy the PHP scripts to Apache listening on 127.0.0.1:80")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location ~ \\.php$ {")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    proxy_pass   http://127.0.0.1;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location ~ \\.php$ {")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    root           html;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    fastcgi_pass   127.0.0.1:9000;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    fastcgi_index  index.php;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    include        fastcgi_params;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deny access to .htaccess files, if Apache's document root")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# concurs with nginx's one")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#location ~ /\\.ht {")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    deny  all;")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])])]),s._v(" "),a("div",{staticClass:"code-demo-footer"})]),s._v(" "),a("p",[a("strong",[a("code",[s._v("default.conf")]),s._v("详细配置示例")])]),s._v(" "),a("div",{staticClass:"code-demo-wrapper",staticStyle:{display:"none"},attrs:{id:"code-demo-feeadeb2","data-title":"default.conf%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B","data-code":"%7B%22bash%22%3A%22%20%20%20%20server%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%23%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3%5Cn%20%20%20%20%20%20%20%20listen%2080%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23%E5%9F%9F%E5%90%8D%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%A4%9A%E4%B8%AA%EF%BC%8C%E7%94%A8%E7%A9%BA%E6%A0%BC%E9%9A%94%E5%BC%80%5Cn%20%20%20%20%20%20%20%20server_name%20www.jd.com%20jd.com%3B%5Cn%20%20%20%20%20%20%20%20index%20index.html%20index.htm%20index.php%3B%5Cn%20%20%20%20%20%20%20%20root%20%2Fdata%2Fwww%2Fjd%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%23%E5%AF%B9******%E8%BF%9B%E8%A1%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%5Cn%20%20%20%20%20%20%20%20location%20~%20.*.(php%7Cphp5)%3F%24%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20fastcgi_pass%20127.0.0.1%3A9000%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20fastcgi_index%20index.php%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20include%20fastcgi.conf%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20location%20~%20.*.(gif%7Cjpg%7Cjpeg%7Cpng%7Cbmp%7Cswf)%24%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20expires%2010d%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23JS%E5%92%8CCSS%E7%BC%93%E5%AD%98%E6%97%B6%E9%97%B4%E8%AE%BE%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20location%20~%20.*.(js%7Ccss)%3F%24%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20expires%201h%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F%E8%AE%BE%E5%AE%9A%5Cn%20%20%20%20%20%20%20%20%23%24remote_addr%E4%B8%8E%24http_x_forwarded_for%E7%94%A8%E4%BB%A5%E8%AE%B0%E5%BD%95%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84ip%E5%9C%B0%E5%9D%80%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24remote_user%EF%BC%9A%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%94%A8%E6%88%B7%E5%90%8D%E7%A7%B0%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24time_local%EF%BC%9A%20%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95%E8%AE%BF%E9%97%AE%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%B6%E5%8C%BA%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24request%EF%BC%9A%20%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95%E8%AF%B7%E6%B1%82%E7%9A%84url%E4%B8%8Ehttp%E5%8D%8F%E8%AE%AE%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24status%EF%BC%9A%20%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95%E8%AF%B7%E6%B1%82%E7%8A%B6%E6%80%81%EF%BC%9B%E6%88%90%E5%8A%9F%E6%98%AF200%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%23%24body_bytes_sent%20%EF%BC%9A%E8%AE%B0%E5%BD%95%E5%8F%91%E9%80%81%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%96%87%E4%BB%B6%E4%B8%BB%E4%BD%93%E5%86%85%E5%AE%B9%E5%A4%A7%E5%B0%8F%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24http_referer%EF%BC%9A%E7%94%A8%E6%9D%A5%E8%AE%B0%E5%BD%95%E4%BB%8E%E9%82%A3%E4%B8%AA%E9%A1%B5%E9%9D%A2%E9%93%BE%E6%8E%A5%E8%AE%BF%E9%97%AE%E8%BF%87%E6%9D%A5%E7%9A%84%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%24http_user_agent%EF%BC%9A%E8%AE%B0%E5%BD%95%E5%AE%A2%E6%88%B7%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF%EF%BC%9B%5Cn%20%20%20%20%20%20%20%20%23%E9%80%9A%E5%B8%B8web%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%94%BE%E5%9C%A8%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E5%90%8E%E9%9D%A2%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%B0%B1%E4%B8%8D%E8%83%BD%E8%8E%B7%E5%8F%96%E5%88%B0%E5%AE%A2%E6%88%B7%E7%9A%84IP%E5%9C%B0%E5%9D%80%E4%BA%86%EF%BC%8C%E9%80%9A%E8%BF%87%24remote_add%E6%8B%BF%E5%88%B0%E7%9A%84IP%E5%9C%B0%E5%9D%80%E6%98%AF%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84iP%E5%9C%B0%E5%9D%80%E3%80%82%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%A8%E8%BD%AC%E5%8F%91%E8%AF%B7%E6%B1%82%E7%9A%84http%E5%A4%B4%E4%BF%A1%E6%81%AF%E4%B8%AD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%A2%9E%E5%8A%A0x_forwarded_for%E4%BF%A1%E6%81%AF%EF%BC%8C%E7%94%A8%E4%BB%A5%E8%AE%B0%E5%BD%95%E5%8E%9F%E6%9C%89%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84IP%E5%9C%B0%E5%9D%80%E5%92%8C%E5%8E%9F%E6%9D%A5%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%E3%80%82%5Cn%20%20%20%20%20%20%20%20log_format%20access%20'%24remote_addr%20-%20%24remote_user%20%5B%24time_local%5D%20%5C%22%24request%5C%22%20'%5Cn%20%20%20%20%20%20%20%20'%24status%20%24body_bytes_sent%20%5C%22%24http_referer%5C%22%20'%5Cn%20%20%20%20%20%20%20%20'%5C%22%24http_user_agent%5C%22%20%24http_x_forwarded_for'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E5%AE%9A%E4%B9%89%E6%9C%AC%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E7%9A%84%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97%5Cn%20%20%20%20%20%20%20%20access_log%20%20%2Fusr%2Flocal%2Fnginx%2Flogs%2Fhost.access.log%20%20main%3B%5Cn%20%20%20%20%20%20%20%20access_log%20%20%2Fusr%2Flocal%2Fnginx%2Flogs%2Fhost.access.404.log%20%20log404%3B%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E5%AF%B9%20%5C%22%2F%5C%22%20%E5%90%AF%E7%94%A8%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%5Cn%20%20%20%20%20%20%20%20location%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A88%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_redirect%20off%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%90%8E%E7%AB%AF%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87X-Forwarded-For%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E7%9C%9F%E5%AE%9EIP%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E4%BB%A5%E4%B8%8B%E6%98%AF%E4%B8%80%E4%BA%9B%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%8F%AF%E9%80%89%E3%80%82%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Host%20%24host%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%85%81%E8%AE%B8%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9C%80%E5%A4%A7%E5%8D%95%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20client_max_body_size%2010m%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E7%BC%93%E5%86%B2%E5%8C%BA%E4%BB%A3%E7%90%86%E7%BC%93%E5%86%B2%E7%94%A8%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%E7%9A%84%E6%9C%80%E5%A4%A7%E5%AD%97%E8%8A%82%E6%95%B0%EF%BC%8C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%A6%82%E6%9E%9C%E6%8A%8A%E5%AE%83%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%AF%94%E8%BE%83%E5%A4%A7%E7%9A%84%E6%95%B0%E5%80%BC%EF%BC%8C%E4%BE%8B%E5%A6%82256k%EF%BC%8C%E9%82%A3%E4%B9%88%EF%BC%8C%E6%97%A0%E8%AE%BA%E4%BD%BF%E7%94%A8firefox%E8%BF%98%E6%98%AFIE%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E6%9D%A5%E6%8F%90%E4%BA%A4%E4%BB%BB%E6%84%8F%E5%B0%8F%E4%BA%8E256k%E7%9A%84%E5%9B%BE%E7%89%87%EF%BC%8C%E9%83%BD%E5%BE%88%E6%AD%A3%E5%B8%B8%E3%80%82%E5%A6%82%E6%9E%9C%E6%B3%A8%E9%87%8A%E8%AF%A5%E6%8C%87%E4%BB%A4%EF%BC%8C%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E7%9A%84client_body_buffer_size%E8%AE%BE%E7%BD%AE%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%A1%B5%E9%9D%A2%E5%A4%A7%E5%B0%8F%E7%9A%84%E4%B8%A4%E5%80%8D%EF%BC%8C8k%E6%88%96%E8%80%8516k%EF%BC%8C%E9%97%AE%E9%A2%98%E5%B0%B1%E5%87%BA%E7%8E%B0%E4%BA%86%E3%80%82%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E6%97%A0%E8%AE%BA%E4%BD%BF%E7%94%A8firefox4.0%E8%BF%98%E6%98%AFIE8.0%EF%BC%8C%E6%8F%90%E4%BA%A4%E4%B8%80%E4%B8%AA%E6%AF%94%E8%BE%83%E5%A4%A7%EF%BC%8C200k%E5%B7%A6%E5%8F%B3%E7%9A%84%E5%9B%BE%E7%89%87%EF%BC%8C%E9%83%BD%E8%BF%94%E5%9B%9E500%20Internal%20Server%20Error%E9%94%99%E8%AF%AF%5Cn%20%20%20%20%20%20%20%20%20%20%20%20client_body_buffer_size%20128k%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%A1%A8%E7%A4%BA%E4%BD%BFnginx%E9%98%BB%E6%AD%A2HTTP%E5%BA%94%E7%AD%94%E4%BB%A3%E7%A0%81%E4%B8%BA400%E6%88%96%E8%80%85%E6%9B%B4%E9%AB%98%E7%9A%84%E5%BA%94%E7%AD%94%E3%80%82%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_intercept_errors%20on%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4_%E5%8F%91%E8%B5%B7%E6%8F%A1%E6%89%8B%E7%AD%89%E5%80%99%E5%93%8D%E5%BA%94%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23nginx%E8%B7%9F%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4(%E4%BB%A3%E7%90%86%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_connect_timeout%2090%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%9B%9E%E4%BC%A0%E6%97%B6%E9%97%B4(%E4%BB%A3%E7%90%86%E5%8F%91%E9%80%81%E8%B6%85%E6%97%B6)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%9B%9E%E4%BC%A0%E6%97%B6%E9%97%B4_%E5%B0%B1%E6%98%AF%E5%9C%A8%E8%A7%84%E5%AE%9A%E6%97%B6%E9%97%B4%E4%B9%8B%E5%86%85%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BF%85%E9%A1%BB%E4%BC%A0%E5%AE%8C%E6%89%80%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_send_timeout%2090%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4(%E4%BB%A3%E7%90%86%E6%8E%A5%E6%94%B6%E8%B6%85%E6%97%B6)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F%E5%90%8E_%E7%AD%89%E5%80%99%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4_%E5%85%B6%E5%AE%9E%E5%B7%B2%E7%BB%8F%E8%BF%9B%E5%85%A5%E5%90%8E%E7%AB%AF%E7%9A%84%E6%8E%92%E9%98%9F%E4%B9%8B%E4%B8%AD%E7%AD%89%E5%80%99%E5%A4%84%E7%90%86%EF%BC%88%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%AF%B4%E6%98%AF%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E7%9A%84%E6%97%B6%E9%97%B4%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_read_timeout%2090%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88nginx%EF%BC%89%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E5%A4%B4%E4%BF%A1%E6%81%AF%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%A4%A7%E5%B0%8F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E4%BB%8E%E8%A2%AB%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%BB%E5%8F%96%E7%9A%84%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E5%BA%94%E7%AD%94%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%A4%A7%E5%B0%8F%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%99%E9%83%A8%E5%88%86%E5%BA%94%E7%AD%94%E4%B8%AD%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%9A%84%E5%BA%94%E7%AD%94%E5%A4%B4%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%E8%BF%99%E4%B8%AA%E5%80%BC%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%BA%E6%8C%87%E4%BB%A4proxy_buffers%E4%B8%AD%E6%8C%87%E5%AE%9A%E7%9A%84%E4%B8%80%E4%B8%AA%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%8F%AF%E4%BB%A5%E5%B0%86%E5%85%B6%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%9B%B4%E5%B0%8F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_buffer_size%204k%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23proxy_buffers%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E7%BD%91%E9%A1%B5%E5%B9%B3%E5%9D%87%E5%9C%A832k%E4%BB%A5%E4%B8%8B%E7%9A%84%E8%AE%BE%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E7%94%A8%E4%BA%8E%E8%AF%BB%E5%8F%96%E5%BA%94%E7%AD%94%EF%BC%88%E6%9D%A5%E8%87%AA%E8%A2%AB%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E6%95%B0%E7%9B%AE%E5%92%8C%E5%A4%A7%E5%B0%8F%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B9%9F%E4%B8%BA%E5%88%86%E9%A1%B5%E5%A4%A7%E5%B0%8F%EF%BC%8C%E6%A0%B9%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%8D%E5%90%8C%E5%8F%AF%E8%83%BD%E6%98%AF4k%E6%88%96%E8%80%858k%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_buffers%204%2032k%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E9%AB%98%E8%B4%9F%E8%8D%B7%E4%B8%8B%E7%BC%93%E5%86%B2%E5%A4%A7%E5%B0%8F%EF%BC%88proxy_buffers*2%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_busy_buffers_size%2064k%3B%5Cn%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E5%9C%A8%E5%86%99%E5%85%A5proxy_temp_path%E6%97%B6%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E9%A2%84%E9%98%B2%E4%B8%80%E4%B8%AA%E5%B7%A5%E4%BD%9C%E8%BF%9B%E7%A8%8B%E5%9C%A8%E4%BC%A0%E9%80%92%E6%96%87%E4%BB%B6%E6%97%B6%E9%98%BB%E5%A1%9E%E5%A4%AA%E9%95%BF%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23%E8%AE%BE%E5%AE%9A%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6%E5%A4%B9%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%A4%A7%E4%BA%8E%E8%BF%99%E4%B8%AA%E5%80%BC%EF%BC%8C%E5%B0%86%E4%BB%8Eupstream%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%A0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_temp_file_write_size%2064k%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E8%AE%BE%E5%AE%9A%E6%9F%A5%E7%9C%8BNginx%E7%8A%B6%E6%80%81%E7%9A%84%E5%9C%B0%E5%9D%80%5Cn%20%20%20%20%20%20%20%20location%20%2FNginxStatus%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20stub_status%20on%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20access_log%20on%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20auth_basic%20%5C%22NginxStatus%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20auth_basic_user_file%20confpasswd%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%23htpasswd%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%AF%E4%BB%A5%E7%94%A8apache%E6%8F%90%E4%BE%9B%E7%9A%84htpasswd%E5%B7%A5%E5%85%B7%E6%9D%A5%E4%BA%A7%E7%94%9F%E3%80%82%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E6%9C%AC%E5%9C%B0%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20%23%E6%89%80%E6%9C%89jsp%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%9D%87%E4%BA%A4%E7%94%B1tomcat%E6%88%96resin%E5%A4%84%E7%90%86%5Cn%20%20%20%20%20%20%20%20location%20~%20.(jsp%7Cjspx%7Cdo)%3F%24%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Host%20%24host%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A8080%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%23%E6%89%80%E6%9C%89%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%94%B1nginx%E7%9B%B4%E6%8E%A5%E8%AF%BB%E5%8F%96%E4%B8%8D%E7%BB%8F%E8%BF%87tomcat%E6%88%96resin%5Cn%20%20%20%20%20%20%20%20location%20~%20.*.(htm%7Chtml%7Cgif%7Cjpg%7Cjpeg%7Cpng%7Cbmp%7Cswf%7Cioc%7Crar%7Czip%7Ctxt%7Cflv%7Cmid%7Cdoc%7Cppt%7C%5Cn%20%20%20%20%20%20%20%20pdf%7Cxls%7Cmp3%7Cwma)%24%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20expires%2015d%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20location%20~%20.*.(js%7Ccss)%3F%24%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20expires%201h%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%7D"}},[a("div",{staticClass:"demo-wrapper"},[a("div",{staticClass:"code-demo-app"})]),s._v(" "),a("div",{staticClass:"code-demo-container"},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("    server\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#监听端口")]),s._v("\n        listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#域名可以有多个，用空格隔开")]),s._v("\n        server_name www.jd.com jd.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index index.html index.htm index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        root /data/www/jd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#对******进行负载均衡")]),s._v("\n        location ~ .*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("php5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("?$\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            fastcgi_pass "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            fastcgi_index index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            include fastcgi.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#图片缓存时间设置")]),s._v("\n        location ~ .*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gif"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpeg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("png"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("bmp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("swf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            expires 10d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#JS和CSS缓存时间设置")]),s._v("\n        location ~ .*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("?$\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            expires 1h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志格式设定")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$remote_addr与$http_x_forwarded_for用以记录客户端的ip地址；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$remote_user：用来记录客户端用户名称；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$time_local： 用来记录访问时间与时区；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$request： 用来记录请求的url与http协议；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$status： 用来记录请求状态；成功是200，")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$body_bytes_sent ：记录发送给客户端文件主体内容大小；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$http_referer：用来记录从那个页面链接访问过来的；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#$http_user_agent：记录客户浏览器的相关信息；")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址。")]),s._v("\n        log_format access "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_user")]),s._v(" ["),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$time_local")]),s._v('] "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request")]),s._v("\" '")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$status")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$body_bytes_sent")]),s._v(' "'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_referer")]),s._v("\" '")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\""),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_user_agent")]),s._v('" '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_x_forwarded_for")]),s._v("'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义本虚拟主机的访问日志")]),s._v("\n        access_log  /usr/local/nginx/logs/host.access.log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        access_log  /usr/local/nginx/logs/host.access.404.log  log404"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#对 "/" 启用反向代理')]),s._v("\n        location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_pass http://127.0.0.1:88"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            proxy_redirect off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            proxy_set_header X-Real-IP "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端的Web服务器可以通过X-Forwarded-For获取用户真实IP")]),s._v("\n            proxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以下是一些反向代理的配置，可选。")]),s._v("\n            proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#允许客户端请求的最大单文件字节数")]),s._v("\n            client_max_body_size 10m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#缓冲区代理缓冲用户端请求的最大字节数，")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果把它设置为比较大的数值，例如256k，那么，无论使用firefox还是IE浏览器，来提交任意小于256k的图片，都很正常。如果注释该指令，使用默认的client_body_buffer_size设置，也就是操作系统页面大小的两倍，8k或者16k，问题就出现了。")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#无论使用firefox4.0还是IE8.0，提交一个比较大，200k左右的图片，都返回500 Internal Server Error错误")]),s._v("\n            client_body_buffer_size 128k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示使nginx阻止HTTP应答代码为400或者更高的应答。")]),s._v("\n            proxy_intercept_errors on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端服务器连接的超时时间_发起握手等候响应超时时间")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nginx跟后端服务器连接超时时间(代理连接超时)")]),s._v("\n            proxy_connect_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端服务器数据回传时间(代理发送超时)")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据")]),s._v("\n            proxy_send_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#连接成功后，后端服务器响应时间(代理接收超时)")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）")]),s._v("\n            proxy_read_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置代理服务器（nginx）保存用户头信息的缓冲区大小")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置从被代理服务器读取的第一部分应答的缓冲区大小，通常情况下这部分应答中包含一个小的应答头，默认情况下这个值的大小为指令proxy_buffers中指定的一个缓冲区的大小，不过可以将其设置为更小")]),s._v("\n            proxy_buffer_size 4k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#proxy_buffers缓冲区，网页平均在32k以下的设置")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置用于读取应答（来自被代理服务器）的缓冲区数目和大小，默认情况也为分页大小，根据操作系统的不同可能是4k或者8k")]),s._v("\n            proxy_buffers "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 32k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#高负荷下缓冲大小（proxy_buffers*2）")]),s._v("\n            proxy_busy_buffers_size 64k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置在写入proxy_temp_path时数据的大小，预防一个工作进程在传递文件时阻塞太长")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设定缓存文件夹大小，大于这个值，将从upstream服务器传")]),s._v("\n            proxy_temp_file_write_size 64k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设定查看Nginx状态的地址")]),s._v("\n        location /NginxStatus "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            stub_status on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            access_log on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            auth_basic "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NginxStatus"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            auth_basic_user_file confpasswd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#htpasswd文件的内容可以用apache提供的htpasswd工具来产生。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地动静分离反向代理配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所有jsp的页面均交由tomcat或resin处理")]),s._v("\n        location ~ ."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("jsp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jspx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("?$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_set_header Host "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            proxy_set_header X-Real-IP "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$remote_addr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            proxy_set_header X-Forwarded-For "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$proxy_add_x_forwarded_for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            proxy_pass http://127.0.0.1:8080"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所有静态文件由nginx直接读取不经过tomcat或resin")]),s._v("\n        location ~ .*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("htm"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("gif"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpeg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("png"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("bmp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("swf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ioc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rar")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("txt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("flv"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("mid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("doc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ppt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        pdf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("xls"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("mp3"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("wma"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            expires 15d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          \n        location ~ .*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("?$\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            expires 1h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br")])])]),s._v(" "),a("div",{staticClass:"code-demo-footer"})]),s._v(" "),a("h2",{attrs:{id:"nginx集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx集群"}},[s._v("#")]),s._v(" Nginx集群")]),s._v(" "),a("p",[s._v("单点故障，避免nginx的宕机，导致整个程序的崩溃")]),s._v(" "),a("p",[s._v("准备")]),s._v(" "),a("div",{staticClass:"custom-block info"},[a("p",{staticClass:"custom-block-title"},[s._v("准备")]),s._v(" "),a("ul",[a("li",[s._v("准备多台Nginx")]),s._v(" "),a("li",[s._v("准备"),a("code",[s._v("keepalived")]),s._v("，监听nginx的健康情况")]),s._v(" "),a("li",[s._v("准备"),a("code",[s._v("haproxy")]),s._v("，提供一个虚拟的路径，统一的去接收用户的请求")])])]),s._v(" "),a("p",[a("img",{attrs:{src:t(672),alt:"nginx集群"}})])])}),[],!1,null,null,null);n.default=e.exports}}]);