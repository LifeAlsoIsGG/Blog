(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{551:function(s,t){s.exports="data:image/png;base64,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"},552:function(s,t,a){s.exports=a.p+"assets/img/General_class_diagram_of_the_prototype_pattern.5fa429c6.jpg"},832:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),n("ul",[n("li",[s._v("https://www.runoob.com/design-pattern/design-pattern-intro.html")]),s._v(" "),n("li",[s._v("http://c.biancheng.net/view/1317.html")]),s._v(" "),n("li",[n("a",{attrs:{href:"TheZen0fDesignPattern_2.pdf"}},[s._v("设计模式之禅")])])])]),s._v(" "),n("h2",{attrs:{id:"_1-单例模式-创建型模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-单例模式-创建型模式"}},[s._v("#")]),s._v(" 1. 单例模式（创建型模式）")]),s._v(" "),n("p",[n("code",[s._v("创建型模式")])]),s._v(" "),n("p",[s._v("参考")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("https://www.runoob.com/design-pattern/singleton-pattern.html")])])]),s._v(" "),n("p",[s._v("单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。")]),s._v(" "),n("p",[s._v("这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。")]),s._v(" "),n("p",[s._v("单例模式保证了系统内存中只存在一个对象，节省了系统资源,对于一些需要"),n("code",[s._v("频繁创建销毁")]),s._v("的对象,使用单例模式可以提高系统性能。当想实例化一个单例类的时候,必须要记住使用相应的获取对象的方法,而不是使用new")]),s._v(" "),n("p",[s._v("单例模式使用的场景:")]),s._v(" "),n("blockquote",[n("p",[s._v("需要频繁的进行创建和销毁的对象，创建对象时耗时过多或耗费资源过多(即:重量级对象),但又经常用到的对象、工具类对象、频繁访问数据库或文件的对象(比如数据源、 session工厂等)")])]),s._v(" "),n("ul",[n("li",[s._v("1、单例类只能有一个实例。")]),s._v(" "),n("li",[s._v("2、单例类必须自己创建自己的唯一实例。")]),s._v(" "),n("li",[s._v("3、单例类必须给所有其他对象提供这一实例。")])]),s._v(" "),n("h3",{attrs:{id:"实现点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现点"}},[s._v("#")]),s._v(" 实现点")]),s._v(" "),n("ul",[n("li",[s._v("是否线程安全")]),s._v(" "),n("li",[s._v("是否懒加载")]),s._v(" "),n("li",[s._v("是否反射可破坏")])]),s._v(" "),n("h3",{attrs:{id:"_1-1-步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-步骤"}},[s._v("#")]),s._v(" 1.1 步骤")]),s._v(" "),n("h4",{attrs:{id:"步骤-1-创建一个-singleton-类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤-1-创建一个-singleton-类"}},[s._v("#")]),s._v(" 步骤 1：创建一个 "),n("code",[s._v("Singleton")]),s._v(" 类")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//创建 SingleObject 的一个对象")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),s._v(" instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//让构造函数为 private，这样该类就不会被实例化")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取唯一可用的对象")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("showMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h4",{attrs:{id:"步骤-2-从-singleton-类获取唯一的对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤-2-从-singleton-类获取唯一的对象"}},[s._v("#")]),s._v(" 步骤 2：从 "),n("code",[s._v("singleton")]),s._v(" 类获取唯一的对象")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingletonPatternDemo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不合法的构造函数")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//编译时错误：构造函数 SingleObject() 是不可见的")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//SingleObject object = new SingleObject();")]),s._v("\n \n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取唯一可用的对象")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),s._v(" object "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//显示消息")]),s._v("\n      object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("showMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h3",{attrs:{id:"_1-2-懒汉式-线程不安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-懒汉式-线程不安全"}},[s._v("#")]),s._v(" 1.2 懒汉式，线程不安全")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("名称")]),s._v(" "),n("th",[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("是否 Lazy 初始化")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("是否多线程安全")]),s._v(" "),n("td",[s._v("否")])]),s._v(" "),n("tr",[n("td",[s._v("实现难度")]),s._v(" "),n("td",[s._v("易")])])])]),s._v(" "),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("这种方式是最基本的实现方式，这种实现最大的问题就是不支持多线程。因为没有加锁 "),n("code",[s._v("synchronized")]),s._v("，所以严格意义上它并不算单例模式。这种方式 lazy loading 很明显，不要求线程安全，在多线程不能正常工作。"),n("strong",[s._v("实际不推荐使用")])])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"_1-3-懒汉式-线程安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-懒汉式-线程安全"}},[s._v("#")]),s._v(" 1.3 懒汉式，线程安全")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("名称")]),s._v(" "),n("th",[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("是否 Lazy 初始化")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("是否多线程安全")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("实现难度")]),s._v(" "),n("td",[s._v("易")])])])]),s._v(" "),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("这种方式具备很好的 lazy loading，能够在多线程中很好的工作，但是，效率很低，只有第一次创建的时候需要同步，99% 情况下不需要同步。优点：第一次调用才初始化，避免内存浪费。缺点：必须加锁 "),n("code",[s._v("synchronized")]),s._v(" 才能保证单例，但加锁会影响效率。getInstance() 的性能对应用程序不是很关键（该方法使用不太频繁）。"),n("strong",[s._v("实际不推荐使用")])])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"_1-4-饿汉式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-饿汉式"}},[s._v("#")]),s._v(" 1.4 饿汉式")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("名称")]),s._v(" "),n("th",[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("是否 Lazy 初始化")]),s._v(" "),n("td",[s._v("否")])]),s._v(" "),n("tr",[n("td",[s._v("是否多线程安全")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("实现难度")]),s._v(" "),n("td",[s._v("易")])])])]),s._v(" "),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("这种方式比较常用，但容易产生垃圾对象。它基于 classloader 机制避免了多线程的同步问题，不过，instance 在类装载时就实例化，虽然导致类装载的原因有很多种，在单例模式中大多数都是调用 getInstance 方法， 但是也不能确定有其他的方式（或者其他的静态方法）导致类装载，这时候初始化 instance 显然没有达到 lazy loading 的效果。")]),s._v(" "),n("p",[s._v("优点：没有加锁，执行效率会提高。")]),s._v(" "),n("p",[s._v("缺点：类加载时就初始化，浪费内存。")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("静态代码块写法")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton_Hungry")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton_Hungry")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton_Hungry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton_Hungry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton_Hungry")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"_1-5-双重校验锁懒汉式-dcl-即-double-checked-locking"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-双重校验锁懒汉式-dcl-即-double-checked-locking"}},[s._v("#")]),s._v(" 1.5 双重校验锁懒汉式（DCL，即 double-checked locking）")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("名称")]),s._v(" "),n("th",[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("是否 Lazy 初始化")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("是否多线程安全")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("实现难度")]),s._v(" "),n("td",[s._v("较复杂")])])])]),s._v(" "),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("JDK1.5 起。这种方式采用双锁机制，安全且在多线程情况下能保持高性能。"),n("code",[s._v("getInstance()")]),s._v(" 的性能对应用程序很关键。推荐使用")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("volatile")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSingleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("singleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("synchronized")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("singleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n                    singleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("另外，需要注意 uniqueInstance 采⽤ "),n("code",[s._v("volatile")]),s._v(" 关键字修饰也是很有必要。"),n("code",[s._v("volatile")]),s._v("作用是防止在new实例的时候,还没初始化完,有其他线程进来,实例此时已经不为空.多线程拿到的实例数据就不一致,加了该关键字后,先初始化完成后在赋值给实例。 uniqueInstance = new Singleton(); 这段代码其实是分为三步执⾏：")]),s._v(" "),n("ol",[n("li",[s._v("为 uniqueInstance 分配内存空间")]),s._v(" "),n("li",[s._v("初始化 uniqueInstance")]),s._v(" "),n("li",[s._v("将 uniqueInstance 指向分配的内存地址")])]),s._v(" "),n("p",[s._v("但是由于 JVM 具有指令重排的特性，执⾏顺序有可能变成 1>3>2。指令重排在单线程环境下不会出 现问题，但是在多线程环境下会导致⼀个线程获得还没有初始化的实例。例如，线程 T1 执⾏了 1 和 3，此时 T2 调⽤ getUniqueInstance() 后发现 uniqueInstance 不为空，因此返回 uniqueInstance，但此时 uniqueInstance 还未被初始化。 使⽤ volatile 可以禁⽌ JVM 的指令重排，保证在多线程环境下也能正常运⾏。")]),s._v(" "),n("h3",{attrs:{id:"_1-6-静态内部类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-静态内部类"}},[s._v("#")]),s._v(" 1.6 静态内部类")]),s._v(" "),n("p",[s._v("参考")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("https://blog.csdn.net/mnb65482/article/details/80458571")])])]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("名称")]),s._v(" "),n("th",[s._v("描述")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("是否 Lazy 初始化")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("是否多线程安全")]),s._v(" "),n("td",[s._v("是")])]),s._v(" "),n("tr",[n("td",[s._v("实现难度")]),s._v(" "),n("td",[s._v("较复杂")])])])]),s._v(" "),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("静态内部类的优点是：上升为顶级类，外部类加载时并不需要立即加载内部类，内部类不被加载则不去初始化"),n("code",[s._v("INSTANCE")]),s._v("，故而不占内存。即当"),n("code",[s._v("SingleTon")]),s._v("第一次被加载时，并不需要去加载"),n("code",[s._v("SingletonInstance")]),s._v("，只有当"),n("code",[s._v("getInstance()")]),s._v("方法第一次被调用时，才会去初始化"),n("code",[s._v("INSTANCE")]),s._v(",第一次调用"),n("code",[s._v("getInstance()")]),s._v("方法会导致虚拟机加载"),n("code",[s._v("SingleTonHoler")]),s._v("类，这种方法不仅能确保线程安全，也能保证单例的唯一性，同时也延迟了单例的实例化。")]),s._v(" "),n("p",[s._v("这种方式采用了类装载的机制来保证初始化实例时只有一个线程。静态内部类方式在 "),n("code",[s._v("Singleton")]),s._v("类被装载时并不会立即"),n("code",[s._v("实例化")]),s._v(",而是在需要实例化时,调用 "),n("code",[s._v("getInstance")]),s._v("方法,才会装载 "),n("code",[s._v("Singletoninstance")]),s._v("类,从而完成 "),n("code",[s._v("Singleton")]),s._v("的实例化。类的静态属性只会在第一次加载类的时候初始化,所以在这里,帮助我们保证了线程的安全性,在类进行初始化时,别的线程是无法进入的。优点:避免了线程不安全,利用静态内部类特点实现延迟加载,效率高。结论:推荐使用")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingletonInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" INSTANCE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingletonInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("blockquote",[n("p",[s._v("我们再回头看下getInstance()方法，调用的是SingleTonHoler.INSTANCE，取的是SingleTonHoler里的INSTANCE对象，跟上面那个DCL方法不同的是，getInstance()方法并没有多次去new对象，故不管多少个线程去调用getInstance()方法，取的都是同一个INSTANCE对象，而不用去重新创建。当getInstance()方法被调用时，SingleTonHoler才在SingleTon的运行时常量池里，把符号引用替换为直接引用，这时静态对象INSTANCE也真正被创建，然后再被getInstance()方法返回出去，这点同饿汉模式。那么INSTANCE在创建过程中又是如何保证线程安全的呢？在《深入理解JAVA虚拟机》中，有这么一句话:")]),s._v(" "),n("p",[s._v("虚拟机会保证一个类的<\\clinit>()方法在多线程环境中被正确地加锁、同步，如果多个线程同时去初始化一个类，那么只会有一个线程去执行这个类的<\\clinit>()方法，其他线程都需要阻塞等待，直到活动线程执行<\\clinit>()方法完毕。如果在一个类的<\\clinit>()方法中有耗时很长的操作，就可能造成多个进程阻塞(需要注意的是，其他线程虽然会被阻塞，但如果执行<\\clinit>()方法后，其他线程唤醒之后不会再次进入<\\clinit>()方法。同一个加载器下，一个类型只会初始化一次。)，在实际应用中，这种阻塞往往是很隐蔽的。")]),s._v(" "),n("p",[s._v("故而，可以看出INSTANCE在创建过程中是线程安全的，所以说静态内部类形式的单例可保证线程安全，也能保证单例的唯一性，同时也延迟了单例的实例化。")]),s._v(" "),n("p",[s._v("那么，是不是可以说静态内部类单例就是最完美的单例模式了呢？其实不然，静态内部类也有着一个致命的缺点，就是传参的问题，由于是静态内部类的形式去创建单例的，故外部无法传递参数进去，例如Context这种参数，所以，我们创建单例时，可以在静态内部类与DCL模式里自己斟酌。")])]),s._v(" "),n("h3",{attrs:{id:"_1-7-枚举式-拒绝反射构造"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-枚举式-拒绝反射构造"}},[s._v("#")]),s._v(" 1.7 枚举式（拒绝反射构造）")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleTon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("method")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//TODO")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SingleTon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("INSTANCE\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("描述")]),s._v(" "),n("blockquote",[n("p",[s._v("枚举在java中与普通类一样，都能拥有字段与方法，而且枚举实例创建是线程安全的，在任何情况下，它都是一个单例。还能防止反序列化重新创建新的对象")])]),s._v(" "),n("h2",{attrs:{id:"_2-工厂模式-创建型模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-工厂模式-创建型模式"}},[s._v("#")]),s._v(" 2. 工厂模式（创建型模式）")]),s._v(" "),n("p",[n("code",[s._v("创建型模式")])]),s._v(" "),n("p",[s._v("工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。")]),s._v(" "),n("p",[s._v("在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。")]),s._v(" "),n("p",[s._v("工厂方法模式是典型的解耦框架。")]),s._v(" "),n("ul",[n("li",[s._v("迪米特法则：高层模块值需要知道产品的抽象类，其他的实现类都不用关心，符合迪米特法则，")]),s._v(" "),n("li",[s._v("依赖倒置原则：我不需要的就不要去交流；也符合依赖倒置原则，只依赖产品类的抽象；")]),s._v(" "),n("li",[s._v("里氏替换原则：当然也符合里氏替换原则，使用产品子类替换产品父类，没问题！")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://blog-1300186248.cos.ap-shanghai.myqcloud.com/Java-DesignPatterns-CreationalPatterns/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E9%80%9A%E7%94%A8%E5%9B%BE.png",alt:"image-20211024164737188"}})]),s._v(" "),n("p",[s._v("参考")]),s._v(" "),n("blockquote",[n("ul",[n("li",[s._v("https://www.runoob.com/design-pattern/factory-pattern.html")]),s._v(" "),n("li",[s._v("反射在工厂模式的使用：https://www.cnblogs.com/ssrs-wanghao/articles/8993338.html")])])]),s._v(" "),n("p",[s._v("用反射的工厂")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Shape")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getShape")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" clz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),s._v(" t "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            t "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clz"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("newInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"简单工厂-静态工厂"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简单工厂-静态工厂"}},[s._v("#")]),s._v(" 简单工厂（静态工厂）")]),s._v(" "),n("p",[s._v("没有抽象工厂类，而是工厂类使用静态方法来创建实体，也被称为静态工厂类，不符合开闭原则但是简单")]),s._v(" "),n("h3",{attrs:{id:"延迟初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#延迟初始化"}},[s._v("#")]),s._v(" 延迟初始化")]),s._v(" "),n("p",[s._v("一个对象被消费完毕后，并不立刻释放，工厂类 保持其初始状态，等待再次被使用。延迟初始化是工厂方法模式的一个扩展应用。通常使用一个Map来缓存，并可指定存在系统中的实例化数量。")]),s._v(" "),n("h2",{attrs:{id:"抽象工厂模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#抽象工厂模式"}},[s._v("#")]),s._v(" 抽象工厂模式")]),s._v(" "),n("p",[s._v("相对于工厂模式只有一个工厂，抽象工厂模式定义一个工厂抽象类并实现多个工厂类")]),s._v(" "),n("h3",{attrs:{id:"缺点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[s._v("#")]),s._v(" 缺点")]),s._v(" "),n("p",[s._v("抽象工厂本身违反开闭原则，当增加产品时抽象工厂要增加方法，实现类也要实现方法。")]),s._v(" "),n("blockquote",[n("p",[s._v("在抽象工厂模式的缺点中，我们提到抽象工厂模式的产品族扩展比较困难，但是一定要 清楚，是产品族扩展困难，而不是产品等级。在该模式下，产品等级是非常容易扩展的，增 加一个产品等级，只要增加一个工厂类负责新增加出来的产品生产任务即可。也就是说横向 扩展容易，纵向扩展困难。以人类为例子，产品等级中只有男、女两个性别，现实世界还有 一种性别：双性人，既是男人也是女人（俗语就是阴阳人），那我们要扩展这个产品等级也 是非常容易的，增加三个产品类，分别对应不同的肤色，然后再创建一个工厂类，专门负责 不同肤色人的双性人的创建任务，完全通过扩展来实现需求的变更，从这一点上看，抽象工 厂模式是符合开闭原则的")])]),s._v(" "),n("h3",{attrs:{id:"使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[s._v("#")]),s._v(" 使用场景")]),s._v(" "),n("p",[s._v("抽象工厂模式的使用场景定义非常简单：一个对象族（或是一组没有任何关系的对象） 都有相同的约束，则可以使用抽象工厂模式。")]),s._v(" "),n("h3",{attrs:{id:"最佳实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最佳实践"}},[s._v("#")]),s._v(" 最佳实践")]),s._v(" "),n("p",[s._v("涉及不同操作系统的时候， 都可以考虑使用抽象工厂模式，例如一个应用，需要在三个不同平台（Windows、Linux、 Android（Google发布的智能终端操作系统））上运行，你会怎么设计？分别设计三套不同 的应用？非也，通过抽象工厂模式屏蔽掉操作系统对应用的影响。三个不同操作系统上的软 件功能、应用逻辑、UI都应该是非常类似的，唯一不同的是调用不同的工厂方法，由不同的 产品类去处理与操作系统交互的信息")]),s._v(" "),n("h2",{attrs:{id:"_3-建造者模式-创建型模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-建造者模式-创建型模式"}},[s._v("#")]),s._v(" 3. 建造者模式（创建型模式）")]),s._v(" "),n("p",[n("code",[s._v("创建型模式")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),n("ul",[n("li",[s._v("https://www.runoob.com/design-pattern/builder-pattern.html")]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/3d1c9ffb0a28",target:"_blank",rel:"noopener noreferrer"}},[s._v("一篇文章就彻底弄懂建造者模式(Builder Pattern)"),n("OutboundLink")],1)])])]),s._v(" "),n("h3",{attrs:{id:"_3-1-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-介绍"}},[s._v("#")]),s._v(" 3.1 介绍")]),s._v(" "),n("p",[s._v("建造者模式（Builder Pattern）使用多个简单的对象一步一步构建成一个复杂的对象。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。创建者模式隐藏了复杂对象的创建过程，它把复杂对象的创建过程加以抽象，通过"),n("code",[s._v("子类继承或者重载")]),s._v("的方式，动态的创建具有复合属性的对象。")]),s._v(" "),n("p",[s._v("一个 "),n("code",[s._v("Builder")]),s._v(" 类会一步一步构造最终的对象。该 "),n("code",[s._v("Builder")]),s._v(" 类是独立于其他对象的。")]),s._v(" "),n("p",[n("strong",[s._v("介绍")])]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("介绍")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("意图")]),s._v("：将一个复杂的构建与其表示相分离，使得同样的构建过程可以创建不同的表示。")]),s._v(" "),n("li",[n("strong",[s._v("主要解决")]),s._v('：主要解决在软件系统中，有时候面临着"一个复杂对象"的创建工作，其通常由各个部分的子对象用一定的算法构成；由于需求的变化，这个复杂对象的各个部分经常面临着剧烈的变化，但是将它们组合在一起的算法却相对稳定。')]),s._v(" "),n("li",[n("strong",[s._v("何时使用")]),s._v("：一些基本部件不会变，而其组合经常变化的时候。")]),s._v(" "),n("li",[n("strong",[s._v("如何解决")]),s._v("：将变与不变分离开。")]),s._v(" "),n("li",[n("strong",[s._v("关键代码")]),s._v("：建造者：创建和提供实例，导演：管理建造出来的实例的依赖关系。")]),s._v(" "),n("li",[n("strong",[s._v("应用实例")]),s._v('： 1、去肯德基，汉堡、可乐、薯条、炸鸡翅等是不变的，而其组合是经常变化的，生成出所谓的"套餐"。 2、JAVA 中的 StringBuilder。')]),s._v(" "),n("li",[n("strong",[s._v("优点")]),s._v("： 1、建造者独立，易扩展。 2、便于控制细节风险。")]),s._v(" "),n("li",[n("strong",[s._v("缺点")]),s._v("： 1、产品必须有共同点，范围有限制。 2、如内部变化复杂，会有很多的建造类。")]),s._v(" "),n("li",[n("strong",[s._v("使用场景")]),s._v("： 1、需要生成的对象具有复杂的内部结构。 2、需要生成的对象内部属性本身相互依赖。")]),s._v(" "),n("li",[n("strong",[s._v("注意事项")]),s._v("：与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。")])])]),s._v(" "),n("p",[n("strong",[s._v("使用场景")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("使用场景")]),s._v(" "),n("ul",[n("li",[s._v("隔离复杂对象的创建和使用，相同的方法，不同执行顺序，产生不同事件结果")]),s._v(" "),n("li",[s._v("多个部件都可以装配到一个对象中，但产生的运行结果不相同")]),s._v(" "),n("li",[s._v("产品类非常复杂或者产品类因为调用顺序不同而产生不同作用")]),s._v(" "),n("li",[s._v("初始化一个对象时，参数过多，或者很多参数具有默认值")]),s._v(" "),n("li",[s._v("Builder模式不适合创建差异性很大的产品类\n产品内部变化复杂，会导致需要定义很多具体建造者类实现变化，增加项目中类的数量，增加系统的理解难度和运行成本")]),s._v(" "),n("li",[s._v("需要生成的产品对象有复杂的内部结构，这些产品对象具备共性；")])])]),s._v(" "),n("p",[n("strong",[s._v("主要作用")])]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("主要作用")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在用户不知道对象的建造过程和细节的情况下就可以直接创建复杂的对象。")])]),s._v(" "),n("li",[n("p",[s._v("用户只需要给出指定复杂对象的类型和内容；")])]),s._v(" "),n("li",[n("p",[s._v("建造者模式负责按顺序创建复杂对象（把内部的建造过程和细节隐藏起来)")])])])]),s._v(" "),n("p",[n("strong",[s._v("解决的问题")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("解决的问题")]),s._v(" "),n("ul",[n("li",[s._v("方便用户创建复杂的对象（不需要知道实现过程）")]),s._v(" "),n("li",[s._v("代码复用性 & 封装性（将对象构建过程和细节进行封装 & 复用）")])]),s._v(" "),n("blockquote",[n("p",[s._v("例子：造汽车 & 买汽车。")]),s._v(" "),n("ol",[n("li",[s._v("工厂（建造者模式）：负责制造汽车（组装过>程和细节在工厂内）")]),s._v(" "),n("li",[s._v("汽车购买者（用户）：你只需要说出你需要的>型号（对象的类型和内容），然后直接购买就可>>以使用了\n（不需要知道汽车是怎么组装的（车轮、车门、>发动机、方向盘等等））")])])])]),s._v(" "),n("p",[n("strong",[s._v("优点")])]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("优点")]),s._v(" "),n("ul",[n("li",[s._v("使用建造者模式可以使客户端不必知道产品内部组成的细节。")]),s._v(" "),n("li",[s._v("具体的建造者类之间是相互独立的，这有利于系统的扩展。")]),s._v(" "),n("li",[s._v("具体的建造者相互独立，因此可以对建造的过程逐步细化，而不会对其他模块产生任何影响。")])])]),s._v(" "),n("p",[n("strong",[s._v("缺点")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("缺点")]),s._v(" "),n("ul",[n("li",[s._v("建造者模式所创建的产品一般具有较多的共同点，其组成部分相似；如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用范围受到一定的限制。")]),s._v(" "),n("li",[s._v("如果产品的内部变化复杂，可能会导致需要定义很多具体建造者类来实现这种变化，导致系统变得很庞大。")])])]),s._v(" "),n("h3",{attrs:{id:"_3-2-原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-原理"}},[s._v("#")]),s._v(" 3.2 原理")]),s._v(" "),n("p",[n("img",{attrs:{src:a(551),alt:"建造者模式UML类图"}})]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("原理模式")]),s._v(" "),n("ul",[n("li",[s._v("指挥者（Director）直接和客户（Client）进行需求沟通；")]),s._v(" "),n("li",[s._v("沟通后指挥者将客户创建产品的需求划分为各个部件的建造请求（Builder）；")]),s._v(" "),n("li",[s._v("将各个部件的建造请求委派到具体的建造者（ConcreteBuilder）；")]),s._v(" "),n("li",[s._v("各个具体建造者负责进行产品部件的构建；")]),s._v(" "),n("li",[s._v("最终构建成具体产品（Product）。")])])]),s._v(" "),n("h3",{attrs:{id:"_3-3-案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-案例"}},[s._v("#")]),s._v(" 3.3 案例")]),s._v(" "),n("p",[s._v("用 builder 模式创建"),n("code",[s._v("共享单车")]),s._v("为例子，示例代码：")]),s._v(" "),n("h4",{attrs:{id:"产品product类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#产品product类"}},[s._v("#")]),s._v(" 产品Product类")]),s._v(" "),n("p",[n("code",[s._v("Bike.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ToString")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*框架*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*座椅*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*车胎*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"建造者builder抽象类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建造者builder抽象类"}},[s._v("#")]),s._v(" 建造者Builder抽象类")]),s._v(" "),n("p",[n("code",[s._v("Builder.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建产品对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" bikeProduct "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 具体部件建造过程在具体Builder中实现")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("abstract")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义工厂方法，返回一个完整产品对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"具体建造者concretebuilder类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#具体建造者concretebuilder类"}},[s._v("#")]),s._v(" 具体建造者ConcreteBuilder类")]),s._v(" "),n("p",[n("code",[s._v("MobikeBuilder.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeBuilder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MobikeFrame"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MobikeSeat"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MobikeTire"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[n("code",[s._v("OfoBuilder.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoBuilder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OfoFrame"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OfoSeat"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bikeProduct"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OfoTire"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h4",{attrs:{id:"指挥者director类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指挥者director类"}},[s._v("#")]),s._v(" 指挥者Director类")]),s._v(" "),n("p",[n("code",[s._v("Director.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 方式一：通过构造函数设置实际的构造者")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 传入类型是基类，面向抽象编程，符合里氏替换原则")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("builder "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 方式二：通过setter方法设置实际的构造者")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("builder "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构建复杂产品对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("construct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildTire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("buildSeat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getProduct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h4",{attrs:{id:"客户端使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#客户端使用"}},[s._v("#")]),s._v(" 客户端使用")]),s._v(" "),n("p",[n("code",[s._v("Client.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Client")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据Ofo建造者创建Mobike实体类")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeDirector")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeBike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeDirector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("construct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MobikeBike = "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MobikeBike")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//根据Ofo建造者创建Ofo实体类")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoDirector")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Director")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoBike")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoDirector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("construct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OfoBike = "')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OfoBike")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"使用场景-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景-2"}},[s._v("#")]),s._v(" 使用场景")]),s._v(" "),n("ul",[n("li",[s._v("相同的方法，不同的执行顺序，产生不同的事件结果时，可以采用建造者模式。")]),s._v(" "),n("li",[s._v("多个部件或零件，都可以装配到一个对象中，但是产生的运行结果又不相同时，则可 以使用该模式。")]),s._v(" "),n("li",[s._v("产品类非常复杂，或者产品类中的调用顺序不同产生了不同的效能，这个时候使用建 造者模式非常合适。")]),s._v(" "),n("li",[s._v("在对象创建过程中会使用到系统中的一些其他对象，这些对象在产品对象的创建过程 中不易得到时，也可以采用建造者模式封装该对象的创建过程。该种场景只能是一个补偿方 法，因为一个对象不容易获得，而在设计阶段竟然没有发觉，而要通过创建者模式柔化创建 过程，本身已经违反设计的最初目标。")])]),s._v(" "),n("h3",{attrs:{id:"_3-4-使用静态内部类build"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-使用静态内部类build"}},[s._v("#")]),s._v(" 3.4 使用静态内部类Build")]),s._v(" "),n("p",[s._v("当一个类构造器需要传入很多参数时，如果创建这个类的实例，代码可读性会非常差，而且很容易引入错误，此时就可以利用 builder模式进行重构，插件"),n("code",[s._v("lombok")]),s._v("的注解"),n("code",[s._v("@Builder")]),s._v("也是同样原理，重构的代码如下：")]),s._v(" "),n("p",[n("code",[s._v("BikeWithBuild.java")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*框架*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*座椅*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*车胎*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造方法范围设为private意味着只能通过内部即内部的Builder来创建对象")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        frame "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        seat "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        tire "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设为静态，当类BikeWithBuild调用此静态方法后即BikeWithBuild.builder()返回Builder实体，")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//即可以开始调用属性方法来构造，最后用Builder的build()返回实体类完成构造")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 静态内部类Builder")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*框架*/")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*座椅*/")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*车胎*/")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 空的构造方法")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("frame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            frame "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("seat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            seat "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" seat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Builder")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            tire "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tire"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//最后调用build将想要的属性赋值后的Builder作为参数来返回BikeWithBuild对象")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br")])]),n("p",[s._v("使用")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),s._v(" bikeWithBuild "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BikeWithBuild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("frame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"frame"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("seat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"seat"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tire")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tire"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("上面的示例代码只是传入三个参数，如果参数是十四个甚至更多，builder 模式的优势将会更加明显，传递参数更加灵活，代码具有更高的可读性.")]),s._v(" "),n("p",[s._v("优点是可以将构造器的setter方法名取成类似注释的方式，这样我们可以很清晰的知道刚才究竟设置的什么值，可读性较高")]),s._v(" "),n("p",[s._v("缺点是比较冗长。")]),s._v(" "),n("h3",{attrs:{id:"_3-5-建造者模式与抽象工厂模式的比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-建造者模式与抽象工厂模式的比较"}},[s._v("#")]),s._v(" 3.5 建造者模式与抽象工厂模式的比较")]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("建造者模式与抽象工厂模式的比较")]),s._v(" "),n("ul",[n("li",[s._v("与"),n("code",[s._v("抽象工厂模式")]),s._v("相比，"),n("code",[s._v("建造者模式")]),s._v("返回一个"),n("code",[s._v("组装好的完整产品")]),s._v("，而"),n("code",[s._v("抽象工厂模式")]),s._v("返回"),n("code",[s._v("一系列相关的产品")]),s._v("，这些产品位于"),n("code",[s._v("不同产品等级结构")]),s._v("，构成了一个"),n("code",[s._v("产品族")]),s._v(" 。")]),s._v(" "),n("li",[s._v("在"),n("code",[s._v("抽象工厂模式")]),s._v("中，客户端实例化工厂类，然后调用工厂方法获取所需产品对象；而在"),n("code",[s._v("建造者模式")]),s._v("中，客户端可以不直接调用建造者的相关方法，而是通过指挥者类来指导如何生成对象，包括对象的组装过程和建造步骤，它侧重于一步步构造一个复杂对象，返回一个完整的对象 。")]),s._v(" "),n("li",[s._v("如果将"),n("code",[s._v("抽象工厂模式")]),s._v("看成汽车配件生产工厂，生产一个产品族的产品；那么"),n("code",[s._v("建造者模式")]),s._v("就是一个汽车组装工厂，通过对部件的组装可以返回一辆完整的汽车")])])]),s._v(" "),n("h2",{attrs:{id:"_4-原型模式-创建型模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-原型模式-创建型模式"}},[s._v("#")]),s._v(" 4. 原型模式（创建型模式）")]),s._v(" "),n("p",[n("code",[s._v("创建型模式")])]),s._v(" "),n("p",[s._v("原型模式（Prototype Pattern）是用于"),n("code",[s._v("创建重复的对象")]),s._v("，同时又能保证性能。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。")]),s._v(" "),n("p",[s._v("这种模式是实现了一个"),n("code",[s._v("原型接口")]),s._v("，该接口用于创建当前对象的克隆。当直接创建对象的代价比较大时，则采用这种模式。")]),s._v(" "),n("p",[s._v("例如，一个对象需要在一个高代价的数据库操作之后被创建。我们可以缓存该对象，在下一个请求时返回它的克隆，在需要的时候更新数据库，以此来减少数据库调用。")]),s._v(" "),n("p",[s._v("原型模式（Prototype Pattern）的简单程度仅次于单例模式和迭代器模式。正是由于简 单，使用的场景才非常地多，其定义如下：")]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("相关信息")]),s._v(" "),n("p",[s._v("Specify the kinds of objects to create using a prototypical instance,and create new objects by copying this prototype.（用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对 象。）")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(552),alt:"图13-3 原型模式的通用类图"}})]),s._v(" "),n("h3",{attrs:{id:"_4-1-介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-介绍"}},[s._v("#")]),s._v(" 4.1 介绍")]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("介绍")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("意图")]),s._v("：用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("主要解决")]),s._v("：在运行期建立和删除原型。")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("何时使用")])]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("当一个系统应该独立于它的产品创建，构成和表示时。")]),s._v(" "),n("li",[s._v("当要实例化的类是在运行时刻指定时，例如，通过动态装载。")]),s._v(" "),n("li",[s._v("为了避免创建一个与产品类层次平行的工厂类层次时。")]),s._v(" "),n("li",[s._v("当一个类的实例只能有几个不同状态组合中的一种时。建立相应数目的原型并克隆它们可能比每次用合适的状态手工实例化该类更方便一些。")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("如何解决")]),s._v("：利用已有的一个原型对象，快速地生成和原型对象一样的实例。")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("关键代码")]),s._v("：")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("实现"),n("code",[s._v("克隆操作")]),s._v("，在 JAVA "),n("code",[s._v("继承 Cloneable")]),s._v("，重写 "),n("code",[s._v("clone()")]),s._v("，在 .NET 中可以使用 Object 类的 MemberwiseClone() 方法来实现对象的浅拷贝或通过序列化的方式来实现深拷贝。")]),s._v(" "),n("li",[s._v('原型模式同样用于隔离类对象的使用者和具体类型（易变类）之间的耦合关系，它同样要求这些"易变类"拥有稳定的接口。')])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("应用实例")]),s._v("：")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("细胞分裂。")]),s._v(" "),n("li",[s._v("JAVA 中的 "),n("code",[s._v("Object clone()")]),s._v(" 方法。")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("优点")]),s._v("：")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("性能提高。")]),s._v(" "),n("li",[s._v("逃避构造函数的约束。")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("缺点")]),s._v("：")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("配备克隆方法需要对类的功能进行通盘考虑，这对于全新的类不是很难，但对于已有的类不一定很容易，特别当一个类引用不支持串行化的间接对象，或者引用含有循环结构的时候。")]),s._v(" "),n("li",[s._v("必须实现 "),n("code",[s._v("Cloneable")]),s._v(" 接口。")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("使用场景")]),s._v("：")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("资源优化场景。")]),s._v(" "),n("li",[s._v("类初始化需要消化非常多的资源，这个资源包括数据、硬件资源等。")]),s._v(" "),n("li",[s._v("性能和安全要求的场景。")]),s._v(" "),n("li",[s._v("通过 new 产生一个对象需要非常繁琐的数据准备或访问权限，则可以使用原型模式。")]),s._v(" "),n("li",[s._v("一个对象多个修改者的场景。")]),s._v(" "),n("li",[s._v("一个对象需要提供给其他对象访问，而且各个调用者可能都需要修改其值时，可以考虑使用原型模式拷贝多个对象供调用者使用。")]),s._v(" "),n("li",[s._v("在实际项目中，原型模式很少单独出现，一般是和工厂方法模式一起出现，通过 clone 的方法创建一个对象，然后由工厂方法提供给调用者。原型模式已经与 Java 融为浑然一体，大家可以随手拿来使用。")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("注意事项")]),s._v("：与通过对一个类进行实例化来构造新对象不同的是，原型模式是通过拷贝一个现有对象生成新对象的。浅拷贝实现 Cloneable，重写，深拷贝是通过实现 Serializable 读取二进制流。")])])])]),s._v(" "),n("h3",{attrs:{id:"_4-2-优缺点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-优缺点"}},[s._v("#")]),s._v(" 4.2 优缺点")]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("优点")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("性能优良")]),s._v(" "),n("blockquote",[n("p",[s._v("原型模式是在内存二进制流的拷贝，要比直接new一个对象性能好很多，特别是要在一 个循环体内产生大量的对象时，原型模式可以更好地体现其优点。")])])]),s._v(" "),n("li",[n("p",[s._v("逃避构造函数的约束")]),s._v(" "),n("blockquote",[n("p",[s._v("这既是它的优点也是缺点即不会执行构造方法，Object类的 clone方法的原理是从内存中（具体地说就是堆内存）以二进制流的方式进行拷贝，重新分配 一个内存块，那构造函数没有被执行也是非常正常的了。构造函数是不会执行的（参见13.4 节）。优点就是减少了约束，缺点也是减少了约束，需要大家在实际应用时考虑。")])])])])]),s._v(" "),n("h3",{attrs:{id:"_4-3-使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-使用场景"}},[s._v("#")]),s._v(" 4.3 使用场景")]),s._v(" "),n("div",{staticClass:"custom-block info"},[n("p",{staticClass:"custom-block-title"},[s._v("使用场景")]),s._v(" "),n("ul",[n("li",[s._v("资源优化场景 ：类初始化需要消化非常多的资源，这个资源包括数据、硬件资源等。")]),s._v(" "),n("li",[s._v("性能和安全要求的场景：通过new产生一个对象需要非常繁琐的数据准备或访问权限，则可以使用原型模式。")]),s._v(" "),n("li",[s._v("一个对象多个修改者的场景：一个对象需要提供给其他对象访问，而且各个调用者可能都需要修改其值时，可以考虑 使用原型模式拷贝多个对象供调用者使用。 在实际项目中，原型模式很少单独出现，一般是和工厂方法模式一起出现，通过clone的 方法创建一个对象，然后由工厂方法提供给调用者。原型模式已经与Java融为一体，大家可 以随手拿来使用。")])])]),s._v(" "),n("h3",{attrs:{id:"浅拷贝和深拷贝"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浅拷贝和深拷贝"}},[s._v("#")]),s._v(" 浅拷贝和深拷贝")]),s._v(" "),n("ul",[n("li",[s._v("浅拷贝：Object类提供 的方法clone只是拷贝本对象，其对象内部的数组、引用对象等都不拷贝，还是指向原生对象的内部元素地址，这种拷贝就叫做浅拷贝。其他的例如String和数据类型int等都被会被拷贝。")]),s._v(" "),n("li",[s._v("深拷贝：在浅拷贝基础上连引用数据类型都拷贝新的")])])])}),[],!1,null,null,null);t.default=e.exports}}]);